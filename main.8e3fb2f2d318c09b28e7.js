(()=>{"use strict";var e=[{cardinfo:"Архыз",cardurl:new URL("https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg")},{cardinfo:"Челябинская область",cardurl:new URL("https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg")},{cardinfo:"Иваново",cardurl:new URL("https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg")},{cardinfo:"Камчатка",cardurl:new URL("https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg")},{cardinfo:"Холмогорский район",cardurl:new URL("https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg")},{cardinfo:"Байкал",cardurl:new URL("https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg")}];function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=n,this._container=document.querySelector(t)}var n,r;return n=e,(r=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){t._renderer(e)}))}}])&&t(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}();function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t){var n,r,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(e){"Escape"===e.key&&o.close()},(n="_handleEscClose")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this._selectorPopup=t,this._popup=document.querySelector(this._selectorPopup),this._bodyElement=document.querySelector(".page")}var t,n;return t=e,(n=[{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("mousedown",(function(t){(t.target.classList.contains("popup-fade_opened")||t.target.classList.contains("close-button"))&&e.close()}))}},{key:"open",value:function(){this._popup.classList.add("popup-fade_opened"),this._bodyElement.classList.add("page_noscroll"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup-fade_opened"),this._bodyElement.classList.remove("page_noscroll"),document.removeEventListener("keydown",this._handleEscClose)}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=a(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},u.apply(this,arguments)}function a(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function c(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=p(r);if(o){var n=p(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return c(this,e)});function a(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e))._selectorForm=t,r._form=r._popup.querySelector(r._selectorForm),r._inputList=Array.from(r._form.querySelectorAll(".popup__input")),r._handleFormSubmit=n,r}return t=a,(n=[{key:"getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){return e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;u(p(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e.getInputValues())}))}},{key:"open",value:function(){u(p(a.prototype),"open",this).call(this)}},{key:"close",value:function(){u(p(a.prototype),"close",this).call(this),this._form.reset()}}])&&l(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(o);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function _(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=b(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},h.apply(this,arguments)}function b(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(i,e);var t,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(n);if(r){var o=v(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return _(this,e)});function i(e){var t,n,r,l,u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),u=function(e,r){n._titlePopupElement.textContent=e,n._imgPopupElement.src=r,n._imgPopupElement.alt=e,h((t=y(n),v(i.prototype)),"open",t).call(t)},(l="openImage")in(r=y(n=o.call(this,e)))?Object.defineProperty(r,l,{value:u,enumerable:!0,configurable:!0,writable:!0}):r[l]=u,n._imgPopupElement=n._popup.querySelector(".popup-figure__image"),n._titlePopupElement=n._popup.querySelector(".popup-figure__title"),n}return t=i,Object.defineProperty(t,"prototype",{writable:!1}),t}(o);function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S=function(){function e(t){var n=t.titleElement,r=t.subtitleElement;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._titleElement=document.querySelector(n),this._subtitleElement=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{username:this._titleElement.textContent,userinfo:this._subtitleElement.textContent}}},{key:"setUserInfo",value:function(e){this._titleElement.textContent=e.username,this._subtitleElement.textContent=e.userinfo}}])&&g(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(){function e(t,n){var r=this,o=t.data,i=t.handleCardClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),w(this,"_handleClickLikeElement",(function(){r._likeElement.classList.toggle("element__like_type_active")})),w(this,"_handleClickDeleteElement",(function(){r._element.remove(),r._element=null})),this._data=o,this._handleCardClick=i,this._selectors=n,this._element=document.querySelector(this._selectors.template).content.querySelector(this._selectors.articleTemplateElement).cloneNode(!0),this._textElement=this._element.querySelector(this._selectors.textTemplateElement),this._imgElement=this._element.querySelector(this._selectors.imgTemplateElement),this._likeElement=this._element.querySelector(this._selectors.likeTemplateElement),this._basketElement=this._element.querySelector(this._selectors.basketTemplateElement)}var t,n;return t=e,(n=[{key:"_setElementData",value:function(){this._textElement.textContent=this._data.cardinfo,this._imgElement.src=this._data.cardurl,this._imgElement.alt=this._data.cardinfo}},{key:"_setEventListeners",value:function(){var e=this;this._likeElement.addEventListener("click",this._handleClickLikeElement),this._basketElement.addEventListener("click",this._handleClickDeleteElement),this._imgElement.addEventListener("click",(function(){e._handleCardClick(e._data.cardinfo,e._data.cardurl)}))}},{key:"generateCard",value:function(){return this._setElementData(),this._setEventListeners(),this._element}}])&&k(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var L=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._validateSelectors=t,this._formElement=n,this._inputElements=this._formElement.querySelectorAll(this._validateSelectors.inputSelector),this._arrayInputElements=Array.from(this._inputElements),this._spanErrorElements=this._formElement.querySelectorAll(this._validateSelectors.spanErrorSelector),this._submitButtonElement=this._formElement.querySelector(this._validateSelectors.submitButtonSelector)}var t,n;return t=e,(n=[{key:"_unlockSubmitButtonElement",value:function(){this._submitButtonElement.classList.remove(this._validateSelectors.invalidSubmitButtonElement),this._submitButtonElement.removeAttribute("disabled")}},{key:"_blockSubmitButtonElement",value:function(){this._submitButtonElement.classList.add(this._validateSelectors.invalidSubmitButtonElement),this._submitButtonElement.setAttribute("disabled",!0)}},{key:"cleanErrorForm",value:function(){var e=this;this._inputElements.forEach((function(t){t.classList.remove(e._validateSelectors.errorElement),t.classList.remove(e._validateSelectors.errorBorderElement)})),this._spanErrorElements.forEach((function(e){e.textContent=""})),this._blockSubmitButtonElement()}},{key:"_isValid",value:function(){return this._arrayInputElements.some((function(e){return!e.validity.valid}))}},{key:"toggleFormSubmit",value:function(){this._isValid()?this._blockSubmitButtonElement():this._unlockSubmitButtonElement()}},{key:"_setFieldError",value:function(e,t,n){t.textContent=n.validationMessage,n.valid?(e.classList.remove(this._validateSelectors.errorElement),e.classList.remove(this._validateSelectors.errorBorderElement)):(e.classList.add(this._validateSelectors.errorElement),e.classList.add(this._validateSelectors.errorBorderElement))}},{key:"_checkFieldValidity",value:function(e){var t=e.validationMessage,n=e.validity.valid,r=this._formElement.querySelector(this._validateSelectors.submitButtonSelector),o=".popup__input-error_".concat(e.name),i=this._formElement.querySelector(o),l={validationMessage:t,valid:n};return this.toggleFormSubmit(),this._setFieldError(e,i,l,r),n}},{key:"_setEventListeners",value:function(){var e=this;this._inputElements.forEach((function(t){t.addEventListener("input",(function(){e._checkFieldValidity(t)}))}))}},{key:"enableValidation",value:function(){this._setEventListeners(),this.toggleFormSubmit()}}])&&P(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),j={popup:".popup-fade",formSelector:".popup__form",formSelectorInfo:".popup__form_info",formSelectorCard:".popup__form_Card",inputSelector:".popup__input",spanErrorSelector:".popup__input-error",submitButtonSelector:".popup__submit-button",errorElement:"popup__input-error",errorBorderElement:"error",invalidSubmitButtonElement:"popup__submit-button_valid_off"},C={bodyElement:".page",editButton:".profile__edit-button",addButton:".profile__add-button",titleElement:".profile__title",subtitleElement:".profile__subtitle",elementElement:".elements",popup:".popup-fade",popupElement:".popup-fade_type_edit",popupElementCard:".popup-fade_type_new-card",popupElementImg:".popup-fade_type_img",form:".popup__form",formElementInfo:".popup__form_info",formElementrCard:".popup__form_Card",inputSelector:".popup__input",inputNamePopup:".popup__input_type_name",inputDescriptionPopup:".popup__input_type_description",imgPopupElement:".popup-figure__image",titlePopupElement:".popup-figure__title",template:".template",articleTemplateElement:".element",textTemplateElement:".element__title",imgTemplateElement:".element__image",likeTemplateElement:".element__like",basketTemplateElement:".element__basket"},q=document.querySelector(C.popupElement).querySelector(C.form),B=q.querySelector(C.inputNamePopup),R=q.querySelector(C.inputDescriptionPopup),x=document.querySelector(C.popupElementCard).querySelector(C.form),I=(x.querySelectorAll(C.inputSelector),new L(j,q)),T=new L(j,x);I.enableValidation(),T.enableValidation();var F=new f(C.popupElement,C.formElementInfo,(function(e){N.setUserInfo(e),F.close()}));F.setEventListeners();var V=new f(C.popupElementCard,C.formElementrCard,(function(){U.addItem(D(V.getInputValues())),V.close()}));function D(e){return new O({data:e,handleCardClick:M},C).generateCard()}V.setEventListeners();var U=new n(C.elementElement,(function(e){U.addItem(D(e))}));U.renderItems(e);var A=new E(C.popupElementImg);function M(e,t){A.openImage(e,t)}A.setEventListeners();var N=new S({titleElement:C.titleElement,subtitleElement:C.subtitleElement});document.querySelector(C.editButton).addEventListener("click",(function(){var e=N.getUserInfo();B.value=e.username,R.value=e.userinfo,I.toggleFormSubmit(),I.cleanErrorForm(),F.open()})),document.querySelector(C.addButton).addEventListener("click",(function(){T.toggleFormSubmit(),T.cleanErrorForm(),V.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Q0FBRUMsYUFBY08sRUFBVVAsYUFBY0MsZ0JBQWlCTSxFQUFVTixrQkFXMUVoRCxTQUFTQyxjQUFjcUQsRUFBVStELFlBQ3pDdEcsaUJBQWlCLFNBQVMsV0FDMUMsSUFBTXdJLEVBQVdiLEVBQVljLGNBQzdCckIsRUFBYy9GLE1BQVFtSCxFQUFTcEcsU0FDL0JpRixFQUFxQmhHLE1BQVFtSCxFQUFTbkcsU0FDdENrRixFQUFjMUIsbUJBQ2QwQixFQUFjbUIsaUJBQ2RoQixFQUFXaUIsTUFDWixJQUV3QjFKLFNBQVNDLGNBQWNxRCxFQUFVZ0UsV0FDekN2RyxpQkFBaUIsU0FBUyxXQUN6Q3dILEVBQWMzQixtQkFDZDJCLEVBQWNrQixpQkFDZFosRUFBV2EsTUFDWixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8veWFuZGV4X3ByYWt0aWt1bS8uL3NyYy9zY3JpcHRzL2FycmF5cy5qcyIsIndlYnBhY2s6Ly95YW5kZXhfcHJha3Rpa3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly95YW5kZXhfcHJha3Rpa3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8veWFuZGV4X3ByYWt0aWt1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8veWFuZGV4X3ByYWt0aWt1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3lhbmRleF9wcmFrdGlrdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly95YW5kZXhfcHJha3Rpa3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly95YW5kZXhfcHJha3Rpa3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly95YW5kZXhfcHJha3Rpa3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBhcmtoeXogPSBuZXcgVVJMKCdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYXJraHl6LmpwZycpO1xyXG5leHBvcnQgY29uc3QgY2hlbHlhYmluc2tPYmxhc3QgPSBuZXcgVVJMKCdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvY2hlbHlhYmluc2stb2JsYXN0LmpwZycpO1xyXG5leHBvcnQgY29uc3QgaXZhbm92byA9IG5ldyBVUkwoJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9pdmFub3ZvLmpwZycpO1xyXG5leHBvcnQgY29uc3Qga2FtY2hhdGthID0gbmV3IFVSTCgnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2thbWNoYXRrYS5qcGcnKTtcclxuZXhwb3J0IGNvbnN0IGtob2xtb2dvcnNreVJheW9uID0gbmV3IFVSTCgnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2tob2xtb2dvcnNreS1yYXlvbi5qcGcnKTtcclxuZXhwb3J0IGNvbnN0IGJhaWthbCA9IG5ldyBVUkwoJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9iYWlrYWwuanBnJyk7XHJcblxyXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIGNhcmRpbmZvOiAn0JDRgNGF0YvQtycsXHJcbiAgICBjYXJkdXJsOiBhcmtoeXosXHJcbiAgfSxcclxuICB7XHJcbiAgICBjYXJkaW5mbzogJ9Cn0LXQu9GP0LHQuNC90YHQutCw0Y8g0L7QsdC70LDRgdGC0YwnLFxyXG4gICAgY2FyZHVybDogY2hlbHlhYmluc2tPYmxhc3QsXHJcbiAgfSxcclxuICB7XHJcbiAgICBjYXJkaW5mbzogJ9CY0LLQsNC90L7QstC+JyxcclxuICAgIGNhcmR1cmw6IGl2YW5vdm8sXHJcbiAgfSxcclxuICB7XHJcbiAgICBjYXJkaW5mbzogJ9Ca0LDQvNGH0LDRgtC60LAnLFxyXG4gICAgY2FyZHVybDoga2FtY2hhdGthLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgY2FyZGluZm86ICfQpdC+0LvQvNC+0LPQvtGA0YHQutC40Lkg0YDQsNC50L7QvScsXHJcbiAgICBjYXJkdXJsOiBraG9sbW9nb3Jza3lSYXlvbixcclxuICB9LFxyXG4gIHtcclxuICAgIGNhcmRpbmZvOiAn0JHQsNC50LrQsNC7JyxcclxuICAgIGNhcmR1cmw6IGJhaWthbCxcclxuICB9LFxyXG5dOyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lclNlbGVjdG9yLCByZW5kZXJlcikge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH07XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfTtcclxuXHJcbiAgcmVuZGVySXRlbXMoaXRlbXMpIHtcclxuICAgIGl0ZW1zLmZvckVhY2goKGRhdGEpID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoZGF0YSk7XHJcbiAgICB9KTtcclxuICB9O1xyXG59OyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3RvcihzZWxlY3RvclBvcHVwKSB7XHJcbiAgICB0aGlzLl9zZWxlY3RvclBvcHVwID0gc2VsZWN0b3JQb3B1cDtcclxuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvclBvcHVwKTtcclxuICAgIHRoaXMuX2JvZHlFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBhZ2UnKTtcclxuICB9O1xyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoKGV2dC5rZXkpID09PSAnRXNjYXBlJykge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9O1xyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2dCkgPT4ge1xyXG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwLWZhZGVfb3BlbmVkJykgfHwgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Nsb3NlLWJ1dHRvbicpKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9O1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwLWZhZGVfb3BlbmVkJyk7XHJcbiAgICB0aGlzLl9ib2R5RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdwYWdlX25vc2Nyb2xsJyk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH07XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXAtZmFkZV9vcGVuZWQnKTtcclxuICAgIHRoaXMuX2JvZHlFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3BhZ2Vfbm9zY3JvbGwnKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfTtcclxufTsiLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yUG9wdXAsIHNlbGVjdG9yRm9ybSwgaGFuZGxlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIoc2VsZWN0b3JQb3B1cCk7XHJcbiAgICB0aGlzLl9zZWxlY3RvckZvcm0gPSBzZWxlY3RvckZvcm07XHJcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvckZvcm0pO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faW5wdXQnKSk7XHJcblxyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgfTtcclxuXHJcbiAgZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+XHJcbiAgICAgIHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZSxcclxuICAgICk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XHJcbiAgfTtcclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLmdldElucHV0VmFsdWVzKCkpXHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBvcGVuKCkge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH07XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICB9O1xyXG59OyIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yUG9wdXApIHtcclxuICAgIHN1cGVyKHNlbGVjdG9yUG9wdXApO1xyXG4gICAgdGhpcy5faW1nUG9wdXBFbGVtZW50ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwLWZpZ3VyZV9faW1hZ2UnKTtcclxuICAgIHRoaXMuX3RpdGxlUG9wdXBFbGVtZW50ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwLWZpZ3VyZV9fdGl0bGUnKTtcclxuICB9O1xyXG5cclxuICBvcGVuSW1hZ2UgPSAoY2FyZGluZm8sIGNhcmR1cmwpID0+IHtcclxuICAgIHRoaXMuX3RpdGxlUG9wdXBFbGVtZW50LnRleHRDb250ZW50ID0gY2FyZGluZm87XHJcbiAgICB0aGlzLl9pbWdQb3B1cEVsZW1lbnQuc3JjID0gY2FyZHVybDtcclxuICAgIHRoaXMuX2ltZ1BvcHVwRWxlbWVudC5hbHQgPSBjYXJkaW5mbztcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9O1xyXG59OyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IHRpdGxlRWxlbWVudCwgc3VidGl0bGVFbGVtZW50IH0pIHtcclxuICAgIHRoaXMuX3RpdGxlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGl0bGVFbGVtZW50KTtcclxuICAgIHRoaXMuX3N1YnRpdGxlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc3VidGl0bGVFbGVtZW50KTtcclxuICB9O1xyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIHVzZXJuYW1lOiB0aGlzLl90aXRsZUVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgIHVzZXJpbmZvOiB0aGlzLl9zdWJ0aXRsZUVsZW1lbnQudGV4dENvbnRlbnRcclxuICAgIH07XHJcbiAgfTtcclxuXHJcbiAgc2V0VXNlckluZm8oZGF0YSkge1xyXG4gICAgdGhpcy5fdGl0bGVFbGVtZW50LnRleHRDb250ZW50ID0gZGF0YS51c2VybmFtZTtcclxuICAgIHRoaXMuX3N1YnRpdGxlRWxlbWVudC50ZXh0Q29udGVudCA9IGRhdGEudXNlcmluZm87XHJcbiAgfTtcclxufTsiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcblxuICBjb25zdHJ1Y3Rvcih7IGRhdGEsIGhhbmRsZUNhcmRDbGljayB9LCBzZWxlY3RvcnMpIHtcbiAgICB0aGlzLl9kYXRhID0gZGF0YTtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgdGhpcy5fc2VsZWN0b3JzID0gc2VsZWN0b3JzO1xuICAgIHRoaXMuX2VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9ycy50ZW1wbGF0ZSkuY29udGVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3NlbGVjdG9ycy5hcnRpY2xlVGVtcGxhdGVFbGVtZW50KS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgdGhpcy5fdGV4dEVsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3JzLnRleHRUZW1wbGF0ZUVsZW1lbnQpO1xuICAgIHRoaXMuX2ltZ0VsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3JzLmltZ1RlbXBsYXRlRWxlbWVudCk7XG4gICAgdGhpcy5fbGlrZUVsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3JzLmxpa2VUZW1wbGF0ZUVsZW1lbnQpO1xuICAgIHRoaXMuX2Jhc2tldEVsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3JzLmJhc2tldFRlbXBsYXRlRWxlbWVudCk7XG4gIH07XG5cbiAgX3NldEVsZW1lbnREYXRhKCkge1xuICAgIHRoaXMuX3RleHRFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5fZGF0YS5jYXJkaW5mbztcbiAgICB0aGlzLl9pbWdFbGVtZW50LnNyYyA9IHRoaXMuX2RhdGEuY2FyZHVybDtcbiAgICB0aGlzLl9pbWdFbGVtZW50LmFsdCA9IHRoaXMuX2RhdGEuY2FyZGluZm87XG4gIH07XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2xpa2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlQ2xpY2tMaWtlRWxlbWVudCk7XG4gICAgdGhpcy5fYmFza2V0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUNsaWNrRGVsZXRlRWxlbWVudCk7XG4gICAgdGhpcy5faW1nRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHsgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX2RhdGEuY2FyZGluZm8sIHRoaXMuX2RhdGEuY2FyZHVybCkgfSk7XG4gIH07XG5cbiAgX2hhbmRsZUNsaWNrTGlrZUVsZW1lbnQgPSAoKSA9PiB7XG4gICAgdGhpcy5fbGlrZUVsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZSgnZWxlbWVudF9fbGlrZV90eXBlX2FjdGl2ZScpO1xuICB9O1xuXG4gIF9oYW5kbGVDbGlja0RlbGV0ZUVsZW1lbnQgPSAoKSA9PiB7XG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgfTtcblxuICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fc2V0RWxlbWVudERhdGEoKTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XG4gIH07XG59OyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuXG4gIGNvbnN0cnVjdG9yKHZhbGlkYXRlU2VsZWN0b3JzLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX3ZhbGlkYXRlU2VsZWN0b3JzID0gdmFsaWRhdGVTZWxlY3RvcnM7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl92YWxpZGF0ZVNlbGVjdG9ycy5pbnB1dFNlbGVjdG9yKTtcbiAgICB0aGlzLl9hcnJheUlucHV0RWxlbWVudHMgPSBBcnJheS5mcm9tKHRoaXMuX2lucHV0RWxlbWVudHMpO1xuICAgIHRoaXMuX3NwYW5FcnJvckVsZW1lbnRzID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl92YWxpZGF0ZVNlbGVjdG9ycy5zcGFuRXJyb3JTZWxlY3Rvcik7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fdmFsaWRhdGVTZWxlY3RvcnMuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICB9O1xuXG4gIF91bmxvY2tTdWJtaXRCdXR0b25FbGVtZW50KCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl92YWxpZGF0ZVNlbGVjdG9ycy5pbnZhbGlkU3VibWl0QnV0dG9uRWxlbWVudCk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG4gIH07XG5cbiAgX2Jsb2NrU3VibWl0QnV0dG9uRWxlbWVudCgpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fdmFsaWRhdGVTZWxlY3RvcnMuaW52YWxpZFN1Ym1pdEJ1dHRvbkVsZW1lbnQpO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xuICB9O1xuXG4gIGNsZWFuRXJyb3JGb3JtKCkge1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoY2xlYW5JbnB1dCkgPT4ge1xuICAgICAgY2xlYW5JbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3ZhbGlkYXRlU2VsZWN0b3JzLmVycm9yRWxlbWVudCk7XG4gICAgICBjbGVhbklucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fdmFsaWRhdGVTZWxlY3RvcnMuZXJyb3JCb3JkZXJFbGVtZW50KTtcbiAgICB9KTtcbiAgICB0aGlzLl9zcGFuRXJyb3JFbGVtZW50cy5mb3JFYWNoKChjbGVhblNwYW4pID0+IHtcbiAgICAgIGNsZWFuU3Bhbi50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgfSk7XG4gICAgdGhpcy5fYmxvY2tTdWJtaXRCdXR0b25FbGVtZW50KCk7XG4gIH07XG5cbiAgX2lzVmFsaWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2FycmF5SW5wdXRFbGVtZW50cy5zb21lKChkYXRhKSA9PiAhZGF0YS52YWxpZGl0eS52YWxpZCk7XG4gIH07XG5cbiAgdG9nZ2xlRm9ybVN1Ym1pdCgpIHtcbiAgICB0aGlzLl9pc1ZhbGlkKCkgPyB0aGlzLl9ibG9ja1N1Ym1pdEJ1dHRvbkVsZW1lbnQoKSA6IHRoaXMuX3VubG9ja1N1Ym1pdEJ1dHRvbkVsZW1lbnQoKTtcbiAgfTtcblxuICBfc2V0RmllbGRFcnJvcihlbGVtZW50RmllbGQsIGVsZW1lbnRFcnJvciwgcGFyYW1zKSB7XG4gICAgZWxlbWVudEVycm9yLnRleHRDb250ZW50ID0gcGFyYW1zLnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGlmIChwYXJhbXMudmFsaWQpIHtcbiAgICAgIGVsZW1lbnRGaWVsZC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3ZhbGlkYXRlU2VsZWN0b3JzLmVycm9yRWxlbWVudCk7XG4gICAgICBlbGVtZW50RmllbGQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl92YWxpZGF0ZVNlbGVjdG9ycy5lcnJvckJvcmRlckVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbGVtZW50RmllbGQuY2xhc3NMaXN0LmFkZCh0aGlzLl92YWxpZGF0ZVNlbGVjdG9ycy5lcnJvckVsZW1lbnQpO1xuICAgICAgZWxlbWVudEZpZWxkLmNsYXNzTGlzdC5hZGQodGhpcy5fdmFsaWRhdGVTZWxlY3RvcnMuZXJyb3JCb3JkZXJFbGVtZW50KTtcbiAgICB9O1xuICB9O1xuXG4gIF9jaGVja0ZpZWxkVmFsaWRpdHkoZWxlbWVudEZpZWxkKSB7XG4gICAgY29uc3QgeyB2YWxpZGF0aW9uTWVzc2FnZSwgdmFsaWRpdHk6IHsgdmFsaWQgfSB9ID0gZWxlbWVudEZpZWxkO1xuICAgIGNvbnN0IHN1Ym1pdEJ1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3ZhbGlkYXRlU2VsZWN0b3JzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgICBjb25zdCBlcnJvclRleHRDb250YWluZXJTZWxlY3RvciA9IGAucG9wdXBfX2lucHV0LWVycm9yXyR7ZWxlbWVudEZpZWxkLm5hbWV9YDtcbiAgICBjb25zdCBlbGVtZW50RXJyb3IgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGVycm9yVGV4dENvbnRhaW5lclNlbGVjdG9yKTtcbiAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICB2YWxpZGF0aW9uTWVzc2FnZSxcbiAgICAgIHZhbGlkLFxuICAgIH07XG5cbiAgICB0aGlzLnRvZ2dsZUZvcm1TdWJtaXQoKTtcbiAgICB0aGlzLl9zZXRGaWVsZEVycm9yKGVsZW1lbnRGaWVsZCwgZWxlbWVudEVycm9yLCBwYXJhbXMsIHN1Ym1pdEJ1dHRvbkVsZW1lbnQpO1xuXG4gICAgcmV0dXJuIHZhbGlkO1xuICB9O1xuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0ZpZWxkVmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLnRvZ2dsZUZvcm1TdWJtaXQoKTtcbiAgfTtcbn07IiwiaW1wb3J0ICcuLi9wYWdlcy9pbmRleC5jc3MnO1xuaW1wb3J0IHsgaW5pdGlhbENhcmRzIH0gZnJvbSAnLi4vc2NyaXB0cy9hcnJheXMuanMnO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJztcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gJy4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XG5pbXBvcnQgQ2FyZCBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcblxuY29uc3QgdmFsaWRhdGVTZWxlY3RvcnMgPSB7XG4gIHBvcHVwOiAnLnBvcHVwLWZhZGUnLFxuICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0nLFxuICBmb3JtU2VsZWN0b3JJbmZvOiAnLnBvcHVwX19mb3JtX2luZm8nLFxuICBmb3JtU2VsZWN0b3JDYXJkOiAnLnBvcHVwX19mb3JtX0NhcmQnLFxuICBpbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19pbnB1dCcsXG4gIHNwYW5FcnJvclNlbGVjdG9yOiAnLnBvcHVwX19pbnB1dC1lcnJvcicsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19zdWJtaXQtYnV0dG9uJyxcbiAgZXJyb3JFbGVtZW50OiAncG9wdXBfX2lucHV0LWVycm9yJyxcbiAgZXJyb3JCb3JkZXJFbGVtZW50OiAnZXJyb3InLFxuICBpbnZhbGlkU3VibWl0QnV0dG9uRWxlbWVudDogJ3BvcHVwX19zdWJtaXQtYnV0dG9uX3ZhbGlkX29mZicsXG59O1xuXG5jb25zdCBzZWxlY3RvcnMgPSB7XG4gIGJvZHlFbGVtZW50OiAnLnBhZ2UnLFxuICBlZGl0QnV0dG9uOiAnLnByb2ZpbGVfX2VkaXQtYnV0dG9uJyxcbiAgYWRkQnV0dG9uOiAnLnByb2ZpbGVfX2FkZC1idXR0b24nLFxuICB0aXRsZUVsZW1lbnQ6ICcucHJvZmlsZV9fdGl0bGUnLFxuICBzdWJ0aXRsZUVsZW1lbnQ6ICcucHJvZmlsZV9fc3VidGl0bGUnLFxuICBlbGVtZW50RWxlbWVudDogJy5lbGVtZW50cycsXG4gIHBvcHVwOiAnLnBvcHVwLWZhZGUnLFxuICBwb3B1cEVsZW1lbnQ6ICcucG9wdXAtZmFkZV90eXBlX2VkaXQnLFxuICBwb3B1cEVsZW1lbnRDYXJkOiAnLnBvcHVwLWZhZGVfdHlwZV9uZXctY2FyZCcsXG4gIHBvcHVwRWxlbWVudEltZzogJy5wb3B1cC1mYWRlX3R5cGVfaW1nJyxcbiAgZm9ybTogJy5wb3B1cF9fZm9ybScsXG4gIGZvcm1FbGVtZW50SW5mbzogJy5wb3B1cF9fZm9ybV9pbmZvJyxcbiAgZm9ybUVsZW1lbnRyQ2FyZDogJy5wb3B1cF9fZm9ybV9DYXJkJyxcbiAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9faW5wdXQnLFxuICBpbnB1dE5hbWVQb3B1cDogJy5wb3B1cF9faW5wdXRfdHlwZV9uYW1lJyxcbiAgaW5wdXREZXNjcmlwdGlvblBvcHVwOiAnLnBvcHVwX19pbnB1dF90eXBlX2Rlc2NyaXB0aW9uJyxcbiAgaW1nUG9wdXBFbGVtZW50OiAnLnBvcHVwLWZpZ3VyZV9faW1hZ2UnLFxuICB0aXRsZVBvcHVwRWxlbWVudDogJy5wb3B1cC1maWd1cmVfX3RpdGxlJyxcbiAgdGVtcGxhdGU6ICcudGVtcGxhdGUnLFxuICBhcnRpY2xlVGVtcGxhdGVFbGVtZW50OiAnLmVsZW1lbnQnLFxuICB0ZXh0VGVtcGxhdGVFbGVtZW50OiAnLmVsZW1lbnRfX3RpdGxlJyxcbiAgaW1nVGVtcGxhdGVFbGVtZW50OiAnLmVsZW1lbnRfX2ltYWdlJyxcbiAgbGlrZVRlbXBsYXRlRWxlbWVudDogJy5lbGVtZW50X19saWtlJyxcbiAgYmFza2V0VGVtcGxhdGVFbGVtZW50OiAnLmVsZW1lbnRfX2Jhc2tldCcsXG59O1xuXG5jb25zdCBwb3B1cEVsZW1lbnRFZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMucG9wdXBFbGVtZW50KTtcbmNvbnN0IGZvcm1FZGl0ID0gcG9wdXBFbGVtZW50RWRpdC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5mb3JtKTtcbmNvbnN0IGlucHV0TmFtZUVkaXQgPSBmb3JtRWRpdC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5pbnB1dE5hbWVQb3B1cCk7XG5jb25zdCBpbnB1dERlc2NyaXB0aW9uRWRpdCA9IGZvcm1FZGl0LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLmlucHV0RGVzY3JpcHRpb25Qb3B1cCk7XG5cbmNvbnN0IHBvcHVwRWxlbWVudENhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5wb3B1cEVsZW1lbnRDYXJkKTtcbmNvbnN0IGZvcm1DYXJkID0gcG9wdXBFbGVtZW50Q2FyZC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5mb3JtKTtcbmNvbnN0IGlucHV0c05hbWVDYXJkID0gZm9ybUNhcmQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcnMuaW5wdXRTZWxlY3Rvcik7XG5cbmNvbnN0IHZhbGlkYXRvckluZm8gPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0ZVNlbGVjdG9ycywgZm9ybUVkaXQpO1xuY29uc3QgdmFsaWRhdG9yQ2FyZCA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRlU2VsZWN0b3JzLCBmb3JtQ2FyZCk7XG52YWxpZGF0b3JJbmZvLmVuYWJsZVZhbGlkYXRpb24oKTtcbnZhbGlkYXRvckNhcmQuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5jb25zdCBlZGl0U3VibWl0ID0gbmV3IFBvcHVwV2l0aEZvcm0oc2VsZWN0b3JzLnBvcHVwRWxlbWVudCwgc2VsZWN0b3JzLmZvcm1FbGVtZW50SW5mbywgc3VibWl0RWRpdCk7XG5lZGl0U3VibWl0LnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGNhcmRTdWJtaXQgPSBuZXcgUG9wdXBXaXRoRm9ybShzZWxlY3RvcnMucG9wdXBFbGVtZW50Q2FyZCwgc2VsZWN0b3JzLmZvcm1FbGVtZW50ckNhcmQsIHN1Ym1pdENhcmQpO1xuY2FyZFN1Ym1pdC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5mdW5jdGlvbiBjcmVhdGVOZXdDYXJkKGRhdGFJdGVtcykge1xuICBjb25zdCBjYXJkSXRlbSA9IG5ldyBDYXJkKHsgZGF0YTogZGF0YUl0ZW1zLCBoYW5kbGVDYXJkQ2xpY2sgfSwgc2VsZWN0b3JzKTtcbiAgcmV0dXJuIGNhcmRJdGVtLmdlbmVyYXRlQ2FyZCgpO1xufTtcblxuY29uc3Qgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKHNlbGVjdG9ycy5lbGVtZW50RWxlbWVudCwgKGRhdGFJdGVtcykgPT4ge1xuICBzZWN0aW9uLmFkZEl0ZW0oY3JlYXRlTmV3Q2FyZChkYXRhSXRlbXMpKTtcbn0pXG5zZWN0aW9uLnJlbmRlckl0ZW1zKGluaXRpYWxDYXJkcyk7XG5cbmNvbnN0IGltZ0VsZW1lbnQgPSBuZXcgUG9wdXBXaXRoSW1hZ2Uoc2VsZWN0b3JzLnBvcHVwRWxlbWVudEltZyk7XG5pbWdFbGVtZW50LnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cblxuZnVuY3Rpb24gaGFuZGxlQ2FyZENsaWNrKG5hbWUsIGxpbmspIHtcbiAgaW1nRWxlbWVudC5vcGVuSW1hZ2UobmFtZSwgbGluayk7XG59O1xuXG5jb25zdCBuZXdVc2VySW5mbyA9IG5ldyBVc2VySW5mbyh7IHRpdGxlRWxlbWVudDogc2VsZWN0b3JzLnRpdGxlRWxlbWVudCwgc3VidGl0bGVFbGVtZW50OiBzZWxlY3RvcnMuc3VidGl0bGVFbGVtZW50IH0pO1xuZnVuY3Rpb24gc3VibWl0RWRpdChkYXRhKSB7XG4gIG5ld1VzZXJJbmZvLnNldFVzZXJJbmZvKGRhdGEpO1xuICBlZGl0U3VibWl0LmNsb3NlKCk7XG59O1xuXG5mdW5jdGlvbiBzdWJtaXRDYXJkKCkge1xuICBzZWN0aW9uLmFkZEl0ZW0oY3JlYXRlTmV3Q2FyZChjYXJkU3VibWl0LmdldElucHV0VmFsdWVzKCkpKTtcbiAgY2FyZFN1Ym1pdC5jbG9zZSgpO1xufTtcblxuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5lZGl0QnV0dG9uKTtcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBjb25zdCBkYXRhVXNlciA9IG5ld1VzZXJJbmZvLmdldFVzZXJJbmZvKCk7XG4gIGlucHV0TmFtZUVkaXQudmFsdWUgPSBkYXRhVXNlci51c2VybmFtZTtcbiAgaW5wdXREZXNjcmlwdGlvbkVkaXQudmFsdWUgPSBkYXRhVXNlci51c2VyaW5mbztcbiAgdmFsaWRhdG9ySW5mby50b2dnbGVGb3JtU3VibWl0KCk7XG4gIHZhbGlkYXRvckluZm8uY2xlYW5FcnJvckZvcm0oKTtcbiAgZWRpdFN1Ym1pdC5vcGVuKCk7XG59KTtcblxuY29uc3QgcHJvZmlsZUFkZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLmFkZEJ1dHRvbik7XG5wcm9maWxlQWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICB2YWxpZGF0b3JDYXJkLnRvZ2dsZUZvcm1TdWJtaXQoKTtcbiAgdmFsaWRhdG9yQ2FyZC5jbGVhbkVycm9yRm9ybSgpO1xuICBjYXJkU3VibWl0Lm9wZW4oKTtcbn0pOyJdLCJuYW1lcyI6WyJpbml0aWFsQ2FyZHMiLCJjYXJkaW5mbyIsImNhcmR1cmwiLCJVUkwiLCJTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJyZW5kZXJlciIsInRoaXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZWxlbWVudCIsInByZXBlbmQiLCJpdGVtcyIsImZvckVhY2giLCJkYXRhIiwiUG9wdXAiLCJzZWxlY3RvclBvcHVwIiwiZXZ0Iiwia2V5IiwiY2xvc2UiLCJfc2VsZWN0b3JQb3B1cCIsIl9wb3B1cCIsIl9ib2R5RWxlbWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsImFkZCIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJQb3B1cFdpdGhGb3JtIiwic2VsZWN0b3JGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsIl9zZWxlY3RvckZvcm0iLCJfZm9ybSIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZm9ybVZhbHVlcyIsImlucHV0IiwibmFtZSIsInZhbHVlIiwicHJldmVudERlZmF1bHQiLCJnZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiUG9wdXBXaXRoSW1hZ2UiLCJfdGl0bGVQb3B1cEVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsIl9pbWdQb3B1cEVsZW1lbnQiLCJzcmMiLCJhbHQiLCJVc2VySW5mbyIsInRpdGxlRWxlbWVudCIsInN1YnRpdGxlRWxlbWVudCIsIl90aXRsZUVsZW1lbnQiLCJfc3VidGl0bGVFbGVtZW50IiwidXNlcm5hbWUiLCJ1c2VyaW5mbyIsIkNhcmQiLCJzZWxlY3RvcnMiLCJoYW5kbGVDYXJkQ2xpY2siLCJfbGlrZUVsZW1lbnQiLCJ0b2dnbGUiLCJfZWxlbWVudCIsIl9kYXRhIiwiX2hhbmRsZUNhcmRDbGljayIsIl9zZWxlY3RvcnMiLCJ0ZW1wbGF0ZSIsImNvbnRlbnQiLCJhcnRpY2xlVGVtcGxhdGVFbGVtZW50IiwiY2xvbmVOb2RlIiwiX3RleHRFbGVtZW50IiwidGV4dFRlbXBsYXRlRWxlbWVudCIsIl9pbWdFbGVtZW50IiwiaW1nVGVtcGxhdGVFbGVtZW50IiwibGlrZVRlbXBsYXRlRWxlbWVudCIsIl9iYXNrZXRFbGVtZW50IiwiYmFza2V0VGVtcGxhdGVFbGVtZW50IiwiX2hhbmRsZUNsaWNrTGlrZUVsZW1lbnQiLCJfaGFuZGxlQ2xpY2tEZWxldGVFbGVtZW50IiwiX3NldEVsZW1lbnREYXRhIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiRm9ybVZhbGlkYXRvciIsInZhbGlkYXRlU2VsZWN0b3JzIiwiZm9ybUVsZW1lbnQiLCJfdmFsaWRhdGVTZWxlY3RvcnMiLCJfZm9ybUVsZW1lbnQiLCJfaW5wdXRFbGVtZW50cyIsImlucHV0U2VsZWN0b3IiLCJfYXJyYXlJbnB1dEVsZW1lbnRzIiwiX3NwYW5FcnJvckVsZW1lbnRzIiwic3BhbkVycm9yU2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uRWxlbWVudCIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW52YWxpZFN1Ym1pdEJ1dHRvbkVsZW1lbnQiLCJyZW1vdmVBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJjbGVhbklucHV0IiwiZXJyb3JFbGVtZW50IiwiZXJyb3JCb3JkZXJFbGVtZW50IiwiY2xlYW5TcGFuIiwiX2Jsb2NrU3VibWl0QnV0dG9uRWxlbWVudCIsInNvbWUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2lzVmFsaWQiLCJfdW5sb2NrU3VibWl0QnV0dG9uRWxlbWVudCIsImVsZW1lbnRGaWVsZCIsImVsZW1lbnRFcnJvciIsInBhcmFtcyIsInZhbGlkYXRpb25NZXNzYWdlIiwic3VibWl0QnV0dG9uRWxlbWVudCIsImVycm9yVGV4dENvbnRhaW5lclNlbGVjdG9yIiwidG9nZ2xlRm9ybVN1Ym1pdCIsIl9zZXRGaWVsZEVycm9yIiwiaW5wdXRFbGVtZW50IiwiX2NoZWNrRmllbGRWYWxpZGl0eSIsInBvcHVwIiwiZm9ybVNlbGVjdG9yIiwiZm9ybVNlbGVjdG9ySW5mbyIsImZvcm1TZWxlY3RvckNhcmQiLCJib2R5RWxlbWVudCIsImVkaXRCdXR0b24iLCJhZGRCdXR0b24iLCJlbGVtZW50RWxlbWVudCIsInBvcHVwRWxlbWVudCIsInBvcHVwRWxlbWVudENhcmQiLCJwb3B1cEVsZW1lbnRJbWciLCJmb3JtIiwiZm9ybUVsZW1lbnRJbmZvIiwiZm9ybUVsZW1lbnRyQ2FyZCIsImlucHV0TmFtZVBvcHVwIiwiaW5wdXREZXNjcmlwdGlvblBvcHVwIiwiaW1nUG9wdXBFbGVtZW50IiwidGl0bGVQb3B1cEVsZW1lbnQiLCJmb3JtRWRpdCIsImlucHV0TmFtZUVkaXQiLCJpbnB1dERlc2NyaXB0aW9uRWRpdCIsImZvcm1DYXJkIiwidmFsaWRhdG9ySW5mbyIsInZhbGlkYXRvckNhcmQiLCJlbmFibGVWYWxpZGF0aW9uIiwiZWRpdFN1Ym1pdCIsIm5ld1VzZXJJbmZvIiwic2V0VXNlckluZm8iLCJzZXRFdmVudExpc3RlbmVycyIsImNhcmRTdWJtaXQiLCJzZWN0aW9uIiwiYWRkSXRlbSIsImNyZWF0ZU5ld0NhcmQiLCJkYXRhSXRlbXMiLCJnZW5lcmF0ZUNhcmQiLCJyZW5kZXJJdGVtcyIsImltZ0VsZW1lbnQiLCJsaW5rIiwib3BlbkltYWdlIiwiZGF0YVVzZXIiLCJnZXRVc2VySW5mbyIsImNsZWFuRXJyb3JGb3JtIiwib3BlbiJdLCJzb3VyY2VSb290IjoiIn0=