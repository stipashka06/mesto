(()=>{"use strict";var e=[{cardinfo:"Архыз",cardurl:new URL("https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg")},{cardinfo:"Челябинская область",cardurl:new URL("https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg")},{cardinfo:"Иваново",cardurl:new URL("https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg")},{cardinfo:"Камчатка",cardurl:new URL("https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg")},{cardinfo:"Холмогорский район",cardurl:new URL("https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg")},{cardinfo:"Байкал",cardurl:new URL("https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg")}];function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=n,this._container=document.querySelector(t)}var n,r;return n=e,(r=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){t._renderer(e)}))}}])&&t(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}();function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=function(){function e(t){var n,r,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(e){"Escape"===e.key&&o.close()},(n="_handleEscClose")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this._selectorPopup=t,this._popup=document.querySelector(this._selectorPopup),this._bodyElement=document.querySelector(".page")}var t,n;return t=e,(n=[{key:"setEventListeners",value:function(){var e=this;this._popup.addEventListener("mousedown",(function(t){(t.target.classList.contains("popup-fade_opened")||t.target.classList.contains("close-button"))&&e.close()}))}},{key:"open",value:function(){this._popup.classList.add("popup-fade_opened"),this._bodyElement.classList.add("page_noscroll"),document.addEventListener("keydown",this._handleEscClose)}},{key:"close",value:function(){this._popup.classList.remove("popup-fade_opened"),this._bodyElement.classList.remove("page_noscroll"),document.removeEventListener("keydown",this._handleEscClose)}}])&&r(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(){return u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=a(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},u.apply(this,arguments)}function a(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function c(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},p(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=p(r);if(o){var n=p(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return c(this,e)});function a(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,e))._selectorForm=t,r._form=r._popup.querySelector(r._selectorForm),r._inputList=Array.from(r._form.querySelectorAll(".popup__input")),r._handleFormSubmit=n,r}return t=a,(n=[{key:"getInputValues",value:function(){var e=this;return this._formValues={},this._inputList.forEach((function(t){return e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;u(p(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e.getInputValues())}))}},{key:"open",value:function(){u(p(a.prototype),"open",this).call(this)}},{key:"close",value:function(){u(p(a.prototype),"close",this).call(this),this._form.reset()}}])&&l(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(o);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function _(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return y(e)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(){return h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=b(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},h.apply(this,arguments)}function b(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(i,e);var t,n,r,o=(n=i,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(n);if(r){var o=v(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return _(this,e)});function i(e){var t,n,r,l,u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),u=function(e,r){n._titlePopupElement.textContent=e,n._imgPopupElement.src=r,n._imgPopupElement.alt=e,h((t=y(n),v(i.prototype)),"open",t).call(t)},(l="openImage")in(r=y(n=o.call(this,e)))?Object.defineProperty(r,l,{value:u,enumerable:!0,configurable:!0,writable:!0}):r[l]=u,n._imgPopupElement=n._popup.querySelector(".popup-figure__image"),n._titlePopupElement=n._popup.querySelector(".popup-figure__title"),n}return t=i,Object.defineProperty(t,"prototype",{writable:!1}),t}(o);function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var S=function(){function e(t){var n=t.titleElement,r=t.subtitleElement;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._titleElement=document.querySelector(n),this._subtitleElement=document.querySelector(r)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{username:this._titleElement.textContent,userinfo:this._subtitleElement.textContent}}},{key:"setUserInfo",value:function(e){this._titleElement.textContent=e.username,this._subtitleElement.textContent=e.userinfo}}])&&g(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(){function e(t,n){var r=this,o=t.data,i=t.handleCardClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),w(this,"_handleClickLikeElement",(function(){r._likeElement.classList.toggle("element__like_type_active")})),w(this,"_handleClickDeleteElement",(function(){r._element.remove(),r._element=null})),this._data=o,this._handleCardClick=i,this._selectors=n,this._element=document.querySelector(this._selectors.template).content.querySelector(this._selectors.articleTemplateElement).cloneNode(!0),this._textElement=this._element.querySelector(this._selectors.textTemplateElement),this._imgElement=this._element.querySelector(this._selectors.imgTemplateElement),this._likeElement=this._element.querySelector(this._selectors.likeTemplateElement),this._basketElement=this._element.querySelector(this._selectors.basketTemplateElement)}var t,n;return t=e,(n=[{key:"_setElementData",value:function(){this._textElement.textContent=this._data.cardinfo,this._imgElement.src=this._data.cardurl,this._imgElement.alt=this._data.cardinfo}},{key:"_setEventListeners",value:function(){var e=this;this._likeElement.addEventListener("click",this._handleClickLikeElement),this._basketElement.addEventListener("click",this._handleClickDeleteElement),this._imgElement.addEventListener("click",(function(){e._handleCardClick(e._data.cardinfo,e._data.cardurl)}))}},{key:"generateCard",value:function(){return this._setElementData(),this._setEventListeners(),this._element}}])&&k(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var L=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._validateSelectors=t,this._formElement=n,this._inputElements=this._formElement.querySelectorAll(this._validateSelectors.inputSelector),this._arrayInputElements=Array.from(this._inputElements),this._spanErrorElements=this._formElement.querySelectorAll(this._validateSelectors.spanErrorSelector),this._submitButtonElement=this._formElement.querySelector(this._validateSelectors.submitButtonSelector)}var t,n;return t=e,(n=[{key:"_unlockSubmitButtonElement",value:function(){this._submitButtonElement.classList.remove(this._validateSelectors.invalidSubmitButtonElement),this._submitButtonElement.removeAttribute("disabled")}},{key:"_blockSubmitButtonElement",value:function(){this._submitButtonElement.classList.add(this._validateSelectors.invalidSubmitButtonElement),this._submitButtonElement.setAttribute("disabled",!0)}},{key:"cleanErrorForm",value:function(){var e=this;this._inputElements.forEach((function(t){t.classList.remove(e._validateSelectors.errorElement),t.classList.remove(e._validateSelectors.errorBorderElement)})),this._spanErrorElements.forEach((function(e){e.textContent=""})),this._blockSubmitButtonElement()}},{key:"_isValid",value:function(){return this._arrayInputElements.some((function(e){return!e.validity.valid}))}},{key:"toggleFormSubmit",value:function(){this._isValid()?this._blockSubmitButtonElement():this._unlockSubmitButtonElement()}},{key:"_setFieldError",value:function(e,t,n){t.textContent=n.validationMessage,n.valid?(e.classList.remove(this._validateSelectors.errorElement),e.classList.remove(this._validateSelectors.errorBorderElement)):(e.classList.add(this._validateSelectors.errorElement),e.classList.add(this._validateSelectors.errorBorderElement))}},{key:"_checkFieldValidity",value:function(e){var t=e.validationMessage,n=e.validity.valid,r=this._formElement.querySelector(this._validateSelectors.submitButtonSelector),o=".popup__input-error_".concat(e.name),i=this._formElement.querySelector(o),l={validationMessage:t,valid:n};return this.toggleFormSubmit(),this._setFieldError(e,i,l,r),n}},{key:"_setEventListeners",value:function(){var e=this;this._inputElements.forEach((function(t){t.addEventListener("input",(function(){e._checkFieldValidity(t)}))}))}},{key:"enableValidation",value:function(){this._setEventListeners(),this.toggleFormSubmit()}}])&&P(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),j={popup:".popup-fade",formSelector:".popup__form",formSelectorInfo:".popup__form_info",formSelectorCard:".popup__form_Card",inputSelector:".popup__input",spanErrorSelector:".popup__input-error",submitButtonSelector:".popup__submit-button",errorElement:"popup__input-error",errorBorderElement:"error",invalidSubmitButtonElement:"popup__submit-button_valid_off"},C={bodyElement:".page",editButton:".profile__edit-button",addButton:".profile__add-button",titleElement:".profile__title",subtitleElement:".profile__subtitle",elementElement:".elements",popup:".popup-fade",popupElement:".popup-fade_type_edit",popupElementCard:".popup-fade_type_new-card",popupElementImg:".popup-fade_type_img",form:".popup__form",formElementInfo:".popup__form_info",formElementrCard:".popup__form_Card",inputSelector:".popup__input",inputNamePopup:".popup__input_type_name",inputDescriptionPopup:".popup__input_type_description",imgPopupElement:".popup-figure__image",titlePopupElement:".popup-figure__title",template:".template",articleTemplateElement:".element",textTemplateElement:".element__title",imgTemplateElement:".element__image",likeTemplateElement:".element__like",basketTemplateElement:".element__basket"},q=document.querySelector(C.popupElement).querySelector(C.form),B=q.querySelector(C.inputNamePopup),R=q.querySelector(C.inputDescriptionPopup),x=document.querySelector(C.popupElementCard).querySelector(C.form),I=(x.querySelectorAll(C.inputSelector),new L(j,q)),T=new L(j,x);I.enableValidation(),T.enableValidation();var F=new f(C.popupElement,C.formElementInfo,(function(e){N.setUserInfo(e),F.close()}));F.setEventListeners();var V=new f(C.popupElementCard,C.formElementrCard,(function(){U.addItem(D(V.getInputValues())),V.close()}));function D(e){return new O({data:e,handleCardClick:M},C).generateCard()}V.setEventListeners();var U=new n(C.elementElement,(function(e){U.addItem(D(e))}));U.renderItems(e);var A=new E(C.popupElementImg);function M(e,t){A.openImage(e,t)}A.setEventListeners();var N=new S({titleElement:C.titleElement,subtitleElement:C.subtitleElement});document.querySelector(C.editButton).addEventListener("click",(function(){var e=N.getUserInfo();B.value=e.username,R.value=e.userinfo,I.toggleFormSubmit(),I.cleanErrorForm(),F.open()})),document.querySelector(C.addButton).addEventListener("click",(function(){T.toggleFormSubmit(),T.cleanErrorForm(),V.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi4wMWJkNmMxZDUzMTc1ODNhYTZkOS5qcyIsIm1hcHBpbmdzIjoibUJBQU8sSUFPTUEsRUFBZSxDQUMxQixDQUNFQyxTQUFVLFFBQ1ZDLFFBVmtCLElBQUlDLElBQUksa0ZBWTVCLENBQ0VGLFNBQVUsc0JBQ1ZDLFFBYjZCLElBQUlDLElBQUksOEZBZXZDLENBQ0VGLFNBQVUsVUFDVkMsUUFoQm1CLElBQUlDLElBQUksbUZBa0I3QixDQUNFRixTQUFVLFdBQ1ZDLFFBbkJxQixJQUFJQyxJQUFJLHFGQXFCL0IsQ0FDRUYsU0FBVSxxQkFDVkMsUUF0QjZCLElBQUlDLElBQUksOEZBd0J2QyxDQUNFRixTQUFVLFNBQ1ZDLFFBekJrQixJQUFJQyxJQUFJLG1GLDBLQ0xUQyxFQUFBQSxXQUNuQixXQUFZQyxFQUFtQkMsSSw0RkFBVSxTQUN2Q0MsS0FBS0MsVUFBWUYsRUFDakJDLEtBQUtFLFdBQWFDLFNBQVNDLGNBQWNOLEVBQzFDLEMsNENBRUQsU0FBUU8sR0FDTkwsS0FBS0UsV0FBV0ksUUFBUUQsRUFDekIsRyx5QkFFRCxTQUFZRSxHQUFPLFdBQ2pCQSxFQUFNQyxTQUFRLFNBQUNDLEdBQ2IsRUFBS1IsVUFBVVEsRUFDaEIsR0FDRixNLHNFQWRrQlosRywwS0NBQWEsRUFBQUEsV0FDbkIsV0FBWUMsR0FBZSxJLElBQUEsUSw0RkFBQSxTLEVBTVQsU0FBQ0MsR0FDQyxXQUFiQSxFQUFJQyxLQUNQLEVBQUtDLE9BRVIsRyxFQVYwQiwwQixzQkFBQSxLLHVEQUFBLEssS0FDekJkLEtBQUtlLGVBQWlCSixFQUN0QlgsS0FBS2dCLE9BQVNiLFNBQVNDLGNBQWNKLEtBQUtlLGdCQUMxQ2YsS0FBS2lCLGFBQWVkLFNBQVNDLGNBQWMsUUFDNUMsQyxzREFRRCxXQUFvQixXQUNsQkosS0FBS2dCLE9BQU9FLGlCQUFpQixhQUFhLFNBQUNOLElBQ3JDQSxFQUFJTyxPQUFPQyxVQUFVQyxTQUFTLHNCQUF3QlQsRUFBSU8sT0FBT0MsVUFBVUMsU0FBUyxrQkFDdEYsRUFBS1AsT0FFUixHQUNGLEcsa0JBRUQsV0FDRWQsS0FBS2dCLE9BQU9JLFVBQVVFLElBQUkscUJBQzFCdEIsS0FBS2lCLGFBQWFHLFVBQVVFLElBQUksaUJBQ2hDbkIsU0FBU2UsaUJBQWlCLFVBQVdsQixLQUFLdUIsZ0JBQzNDLEcsbUJBRUQsV0FDRXZCLEtBQUtnQixPQUFPSSxVQUFVSSxPQUFPLHFCQUM3QnhCLEtBQUtpQixhQUFhRyxVQUFVSSxPQUFPLGlCQUNuQ3JCLFNBQVNzQixvQkFBb0IsVUFBV3pCLEtBQUt1QixnQkFDOUMsTSxzRUEvQmtCYixHLHl3Q0NFQWdCLEVBQUFBLFNBQUFBLEksNnJCQUNuQixXQUFZZixFQUFlZ0IsRUFBY0MsR0FBa0IsYSw0RkFBQSxVQUN6RCxjQUFNakIsSUFDRGtCLGNBQWdCRixFQUNyQixFQUFLRyxNQUFRLEVBQUtkLE9BQU9aLGNBQWMsRUFBS3lCLGVBQzVDLEVBQUtFLFdBQWFDLE1BQU1DLEtBQUssRUFBS0gsTUFBTUksaUJBQWlCLGtCQUV6RCxFQUFLQyxrQkFBb0JQLEVBTmdDLENBTzFELEMsMkNBRUQsV0FBaUIsV0FNZixPQUxBNUIsS0FBS29DLFlBQWMsQ0FBQyxFQUNwQnBDLEtBQUsrQixXQUFXdkIsU0FBUSxTQUFDNkIsR0FBRCxPQUN0QixFQUFLRCxZQUFZQyxFQUFNQyxNQUFRRCxFQUFNRSxLQURmLElBSWpCdkMsS0FBS29DLFdBQ2IsRywrQkFFRCxXQUFvQixXQUNsQixzREFFQXBDLEtBQUs4QixNQUFNWixpQkFBaUIsVUFBVSxTQUFDTixHQUNyQ0EsRUFBSTRCLGlCQUNKLEVBQUtMLGtCQUFrQixFQUFLTSxpQkFDN0IsR0FDRixHLGtCQUVELFdBQ0Usd0NBQ0QsRyxtQkFFRCxXQUNFLDBDQUNBekMsS0FBSzhCLE1BQU1ZLE9BQ1osTSxzRUFuQ2tCaEIsQ0FBc0JoQixHLHNtQ0NBdEJpQyxFQUFBQSxTQUFBQSxJLDJyQkFDbkIsV0FBWWhDLEdBQWUsUSxNQUFBLE8sNEZBQUEsUyxFQU1mLFNBQUNqQixFQUFVQyxHQUNyQixFQUFLaUQsbUJBQW1CQyxZQUFjbkQsRUFDdEMsRUFBS29ELGlCQUFpQkMsSUFBTXBELEVBQzVCLEVBQUttRCxpQkFBaUJFLElBQU10RCxFQUM1QiwyQ0FDRCxHLEVBWDBCLGUsRUFBQSxFQUN6QixjQUFNaUIsSyxzRkFDTixFQUFLbUMsaUJBQW1CLEVBQUs5QixPQUFPWixjQUFjLHdCQUNsRCxFQUFLd0MsbUJBQXFCLEVBQUs1QixPQUFPWixjQUFjLHdCQUgzQixDQUkxQixDLGdFQUxrQnVDLENBQXVCakMsRywwS0NGdkJ1QyxFQUFBQSxXQUNuQixjQUErQyxJQUFqQ0MsRUFBaUMsRUFBakNBLGFBQWNDLEVBQW1CLEVBQW5CQSxpQiw0RkFBbUIsU0FDN0NuRCxLQUFLb0QsY0FBZ0JqRCxTQUFTQyxjQUFjOEMsR0FDNUNsRCxLQUFLcUQsaUJBQW1CbEQsU0FBU0MsY0FBYytDLEVBQ2hELEMsZ0RBRUQsV0FDRSxNQUFPLENBQ0xHLFNBQVV0RCxLQUFLb0QsY0FBY1AsWUFDN0JVLFNBQVV2RCxLQUFLcUQsaUJBQWlCUixZQUVuQyxHLHlCQUVELFNBQVlwQyxHQUNWVCxLQUFLb0QsY0FBY1AsWUFBY3BDLEVBQUs2QyxTQUN0Q3RELEtBQUtxRCxpQkFBaUJSLFlBQWNwQyxFQUFLOEMsUUFDMUMsTSxzRUFoQmtCTixHLGtTQ0FBTyxFQUFBQSxXQUVuQixhQUF1Q0MsR0FBVyxXQUFwQ2hELEVBQW9DLEVBQXBDQSxLQUFNaUQsRUFBOEIsRUFBOUJBLGlCLDRGQUE4QiwyQ0F1QnhCLFdBQ3hCLEVBQUtDLGFBQWF2QyxVQUFVd0MsT0FBTyw0QkFDcEMsSUF6QmlELG9DQTJCdEIsV0FDMUIsRUFBS0MsU0FBU3JDLFNBQ2QsRUFBS3FDLFNBQVcsSUFDakIsSUE3QkM3RCxLQUFLOEQsTUFBUXJELEVBQ2JULEtBQUsrRCxpQkFBbUJMLEVBQ3hCMUQsS0FBS2dFLFdBQWFQLEVBQ2xCekQsS0FBSzZELFNBQVcxRCxTQUFTQyxjQUFjSixLQUFLZ0UsV0FBV0MsVUFBVUMsUUFBUTlELGNBQWNKLEtBQUtnRSxXQUFXRyx3QkFBd0JDLFdBQVUsR0FDeklwRSxLQUFLcUUsYUFBZXJFLEtBQUs2RCxTQUFTekQsY0FBY0osS0FBS2dFLFdBQVdNLHFCQUNoRXRFLEtBQUt1RSxZQUFjdkUsS0FBSzZELFNBQVN6RCxjQUFjSixLQUFLZ0UsV0FBV1Esb0JBQy9EeEUsS0FBSzJELGFBQWUzRCxLQUFLNkQsU0FBU3pELGNBQWNKLEtBQUtnRSxXQUFXUyxxQkFDaEV6RSxLQUFLMEUsZUFBaUIxRSxLQUFLNkQsU0FBU3pELGNBQWNKLEtBQUtnRSxXQUFXVyxzQkFDbkUsQyxvREFFRCxXQUNFM0UsS0FBS3FFLGFBQWF4QixZQUFjN0MsS0FBSzhELE1BQU1wRSxTQUMzQ00sS0FBS3VFLFlBQVl4QixJQUFNL0MsS0FBSzhELE1BQU1uRSxRQUNsQ0ssS0FBS3VFLFlBQVl2QixJQUFNaEQsS0FBSzhELE1BQU1wRSxRQUNuQyxHLGdDQUVELFdBQXFCLFdBQ25CTSxLQUFLMkQsYUFBYXpDLGlCQUFpQixRQUFTbEIsS0FBSzRFLHlCQUNqRDVFLEtBQUswRSxlQUFleEQsaUJBQWlCLFFBQVNsQixLQUFLNkUsMkJBQ25EN0UsS0FBS3VFLFlBQVlyRCxpQkFBaUIsU0FBUyxXQUFRLEVBQUs2QyxpQkFBaUIsRUFBS0QsTUFBTXBFLFNBQVUsRUFBS29FLE1BQU1uRSxRQUFVLEdBQ3BILEcsMEJBV0QsV0FJRSxPQUhBSyxLQUFLOEUsa0JBQ0w5RSxLQUFLK0UscUJBRUUvRSxLQUFLNkQsUUFDYixNLHNFQXZDa0JMLEcsMEtDQUF3QixFQUFBQSxXQUVuQixXQUFZQyxFQUFtQkMsSSw0RkFBYSxTQUMxQ2xGLEtBQUttRixtQkFBcUJGLEVBQzFCakYsS0FBS29GLGFBQWVGLEVBQ3BCbEYsS0FBS3FGLGVBQWlCckYsS0FBS29GLGFBQWFsRCxpQkFBaUJsQyxLQUFLbUYsbUJBQW1CRyxlQUNqRnRGLEtBQUt1RixvQkFBc0J2RCxNQUFNQyxLQUFLakMsS0FBS3FGLGdCQUMzQ3JGLEtBQUt3RixtQkFBcUJ4RixLQUFLb0YsYUFBYWxELGlCQUFpQmxDLEtBQUttRixtQkFBbUJNLG1CQUNyRnpGLEtBQUswRixxQkFBdUIxRixLQUFLb0YsYUFBYWhGLGNBQWNKLEtBQUttRixtQkFBbUJRLHFCQUNyRixDLCtEQUVELFdBQ0UzRixLQUFLMEYscUJBQXFCdEUsVUFBVUksT0FBT3hCLEtBQUttRixtQkFBbUJTLDRCQUNuRTVGLEtBQUswRixxQkFBcUJHLGdCQUFnQixXQUMzQyxHLHVDQUVELFdBQ0U3RixLQUFLMEYscUJBQXFCdEUsVUFBVUUsSUFBSXRCLEtBQUttRixtQkFBbUJTLDRCQUNoRTVGLEtBQUswRixxQkFBcUJJLGFBQWEsWUFBWSxFQUNwRCxHLDRCQUVELFdBQWlCLFdBQ2Y5RixLQUFLcUYsZUFBZTdFLFNBQVEsU0FBQ3VGLEdBQzNCQSxFQUFXM0UsVUFBVUksT0FBTyxFQUFLMkQsbUJBQW1CYSxjQUNwREQsRUFBVzNFLFVBQVVJLE9BQU8sRUFBSzJELG1CQUFtQmMsbUJBQ3JELElBQ0RqRyxLQUFLd0YsbUJBQW1CaEYsU0FBUSxTQUFDMEYsR0FDL0JBLEVBQVVyRCxZQUFjLEVBQ3pCLElBQ0Q3QyxLQUFLbUcsMkJBQ04sRyxzQkFFRCxXQUNFLE9BQU9uRyxLQUFLdUYsb0JBQW9CYSxNQUFLLFNBQUMzRixHQUFELE9BQVdBLEVBQUs0RixTQUFTQyxLQUF6QixHQUN0QyxHLDhCQUVELFdBQ0V0RyxLQUFLdUcsV0FBYXZHLEtBQUttRyw0QkFBOEJuRyxLQUFLd0csNEJBQzNELEcsNEJBRUQsU0FBZUMsRUFBY0MsRUFBY0MsR0FDekNELEVBQWE3RCxZQUFjOEQsRUFBT0Msa0JBQzlCRCxFQUFPTCxPQUNURyxFQUFhckYsVUFBVUksT0FBT3hCLEtBQUttRixtQkFBbUJhLGNBQ3REUyxFQUFhckYsVUFBVUksT0FBT3hCLEtBQUttRixtQkFBbUJjLHNCQUV0RFEsRUFBYXJGLFVBQVVFLElBQUl0QixLQUFLbUYsbUJBQW1CYSxjQUNuRFMsRUFBYXJGLFVBQVVFLElBQUl0QixLQUFLbUYsbUJBQW1CYyxvQkFFdEQsRyxpQ0FFRCxTQUFvQlEsR0FDbEIsSUFBUUcsRUFBMkNILEVBQTNDRyxrQkFBK0JOLEVBQVlHLEVBQXhCSixTQUFZQyxNQUNqQ08sRUFBc0I3RyxLQUFLb0YsYUFBYWhGLGNBQWNKLEtBQUttRixtQkFBbUJRLHNCQUM5RW1CLEVBQTZCLHVCQUFILE9BQTBCTCxFQUFhbkUsTUFDakVvRSxFQUFlMUcsS0FBS29GLGFBQWFoRixjQUFjMEcsR0FDL0NILEVBQVMsQ0FDYkMsa0JBQUFBLEVBQ0FOLE1BQUFBLEdBTUYsT0FIQXRHLEtBQUsrRyxtQkFDTC9HLEtBQUtnSCxlQUFlUCxFQUFjQyxFQUFjQyxFQUFRRSxHQUVqRFAsQ0FDUixHLGdDQUVELFdBQXFCLFdBQ25CdEcsS0FBS3FGLGVBQWU3RSxTQUFRLFNBQUN5RyxHQUMzQkEsRUFBYS9GLGlCQUFpQixTQUFTLFdBQ3JDLEVBQUtnRyxvQkFBb0JELEVBQzFCLEdBQ0YsR0FDRixHLDhCQUVELFdBQ0VqSCxLQUFLK0UscUJBQ0wvRSxLQUFLK0csa0JBQ04sTSxzRUE5RWtCL0IsR0NTZkMsRUFBb0IsQ0FDeEJrQyxNQUFPLGNBQ1BDLGFBQWMsZUFDZEMsaUJBQWtCLG9CQUNsQkMsaUJBQWtCLG9CQUNsQmhDLGNBQWUsZ0JBQ2ZHLGtCQUFtQixzQkFDbkJFLHFCQUFzQix3QkFDdEJLLGFBQWMscUJBQ2RDLG1CQUFvQixRQUNwQkwsMkJBQTRCLGtDQUd4Qm5DLEVBQVksQ0FDaEI4RCxZQUFhLFFBQ2JDLFdBQVksd0JBQ1pDLFVBQVcsdUJBQ1h2RSxhQUFjLGtCQUNkQyxnQkFBaUIscUJBQ2pCdUUsZUFBZ0IsWUFDaEJQLE1BQU8sY0FDUFEsYUFBYyx3QkFDZEMsaUJBQWtCLDRCQUNsQkMsZ0JBQWlCLHVCQUNqQkMsS0FBTSxlQUNOQyxnQkFBaUIsb0JBQ2pCQyxpQkFBa0Isb0JBQ2xCMUMsY0FBZSxnQkFDZjJDLGVBQWdCLDBCQUNoQkMsc0JBQXVCLGlDQUN2QkMsZ0JBQWlCLHVCQUNqQkMsa0JBQW1CLHVCQUNuQm5FLFNBQVUsWUFDVkUsdUJBQXdCLFdBQ3hCRyxvQkFBcUIsa0JBQ3JCRSxtQkFBb0Isa0JBQ3BCQyxvQkFBcUIsaUJBQ3JCRSxzQkFBdUIsb0JBSW5CMEQsRUFEbUJsSSxTQUFTQyxjQUFjcUQsRUFBVWtFLGNBQ3hCdkgsY0FBY3FELEVBQVVxRSxNQUNwRFEsRUFBZ0JELEVBQVNqSSxjQUFjcUQsRUFBVXdFLGdCQUNqRE0sRUFBdUJGLEVBQVNqSSxjQUFjcUQsRUFBVXlFLHVCQUd4RE0sRUFEbUJySSxTQUFTQyxjQUFjcUQsRUFBVW1FLGtCQUN4QnhILGNBQWNxRCxFQUFVcUUsTUFHcERXLEdBRmlCRCxFQUFTdEcsaUJBQWlCdUIsRUFBVTZCLGVBRXJDLElBQUlOLEVBQWNDLEVBQW1Cb0QsSUFDckRLLEVBQWdCLElBQUkxRCxFQUFjQyxFQUFtQnVELEdBQzNEQyxFQUFjRSxtQkFDZEQsRUFBY0MsbUJBRWQsSUFBTUMsRUFBYSxJQUFJbEgsRUFBYytCLEVBQVVrRSxhQUFjbEUsRUFBVXNFLGlCQXlCdkUsU0FBb0J0SCxHQUNsQm9JLEVBQVlDLFlBQVlySSxHQUN4Qm1JLEVBQVc5SCxPQUNaLElBM0JEOEgsRUFBV0csb0JBRVgsSUFBTUMsRUFBYSxJQUFJdEgsRUFBYytCLEVBQVVtRSxpQkFBa0JuRSxFQUFVdUUsa0JBMkIzRSxXQUNFaUIsRUFBUUMsUUFBUUMsRUFBY0gsRUFBV3ZHLG1CQUN6Q3VHLEVBQVdsSSxPQUNaLElBM0JELFNBQVNxSSxFQUFjQyxHQUVyQixPQURpQixJQUFJNUYsRUFBSyxDQUFFL0MsS0FBTTJJLEVBQVcxRixnQkFBQUEsR0FBbUJELEdBQ2hENEYsY0FDakIsQ0FMREwsRUFBV0Qsb0JBT1gsSUFBTUUsRUFBVSxJQUFJcEosRUFBUTRELEVBQVVpRSxnQkFBZ0IsU0FBQzBCLEdBQ3JESCxFQUFRQyxRQUFRQyxFQUFjQyxHQUMvQixJQUNESCxFQUFRSyxZQUFZN0osR0FFcEIsSUFBTThKLEVBQWEsSUFBSTVHLEVBQWVjLEVBQVVvRSxpQkFJaEQsU0FBU25FLEVBQWdCcEIsRUFBTWtILEdBQzdCRCxFQUFXRSxVQUFVbkgsRUFBTWtILEVBQzVCLENBTERELEVBQVdSLG9CQU9YLElBQU1GLEVBQWMsSUFBSTVGLEVBQVMsQ0FBRUMsYUFBY08sRUFBVVAsYUFBY0MsZ0JBQWlCTSxFQUFVTixrQkFXMUVoRCxTQUFTQyxjQUFjcUQsRUFBVStELFlBQ3pDdEcsaUJBQWlCLFNBQVMsV0FDMUMsSUFBTXdJLEVBQVdiLEVBQVljLGNBQzdCckIsRUFBYy9GLE1BQVFtSCxFQUFTcEcsU0FDL0JpRixFQUFxQmhHLE1BQVFtSCxFQUFTbkcsU0FDdENrRixFQUFjMUIsbUJBQ2QwQixFQUFjbUIsaUJBQ2RoQixFQUFXaUIsTUFDWixJQUV3QjFKLFNBQVNDLGNBQWNxRCxFQUFVZ0UsV0FDekN2RyxpQkFBaUIsU0FBUyxXQUN6Q3dILEVBQWMzQixtQkFDZDJCLEVBQWNrQixpQkFDZFosRUFBV2EsTUFDWixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8veWFuZGV4X3ByYWt0aWt1bS8uL3NyYy9zY3JpcHRzL2FycmF5cy5qcyIsIndlYnBhY2s6Ly95YW5kZXhfcHJha3Rpa3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly95YW5kZXhfcHJha3Rpa3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8veWFuZGV4X3ByYWt0aWt1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8veWFuZGV4X3ByYWt0aWt1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3lhbmRleF9wcmFrdGlrdW0vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly95YW5kZXhfcHJha3Rpa3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly95YW5kZXhfcHJha3Rpa3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly95YW5kZXhfcHJha3Rpa3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBhcmtoeXogPSBuZXcgVVJMKCdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYXJraHl6LmpwZycpO1xyXG5leHBvcnQgY29uc3QgY2hlbHlhYmluc2tPYmxhc3QgPSBuZXcgVVJMKCdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvY2hlbHlhYmluc2stb2JsYXN0LmpwZycpO1xyXG5leHBvcnQgY29uc3QgaXZhbm92byA9IG5ldyBVUkwoJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9pdmFub3ZvLmpwZycpO1xyXG5leHBvcnQgY29uc3Qga2FtY2hhdGthID0gbmV3IFVSTCgnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2thbWNoYXRrYS5qcGcnKTtcclxuZXhwb3J0IGNvbnN0IGtob2xtb2dvcnNreVJheW9uID0gbmV3IFVSTCgnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2tob2xtb2dvcnNreS1yYXlvbi5qcGcnKTtcclxuZXhwb3J0IGNvbnN0IGJhaWthbCA9IG5ldyBVUkwoJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9iYWlrYWwuanBnJyk7XHJcblxyXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIGNhcmRpbmZvOiAn0JDRgNGF0YvQtycsXHJcbiAgICBjYXJkdXJsOiBhcmtoeXosXHJcbiAgfSxcclxuICB7XHJcbiAgICBjYXJkaW5mbzogJ9Cn0LXQu9GP0LHQuNC90YHQutCw0Y8g0L7QsdC70LDRgdGC0YwnLFxyXG4gICAgY2FyZHVybDogY2hlbHlhYmluc2tPYmxhc3QsXHJcbiAgfSxcclxuICB7XHJcbiAgICBjYXJkaW5mbzogJ9CY0LLQsNC90L7QstC+JyxcclxuICAgIGNhcmR1cmw6IGl2YW5vdm8sXHJcbiAgfSxcclxuICB7XHJcbiAgICBjYXJkaW5mbzogJ9Ca0LDQvNGH0LDRgtC60LAnLFxyXG4gICAgY2FyZHVybDoga2FtY2hhdGthLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgY2FyZGluZm86ICfQpdC+0LvQvNC+0LPQvtGA0YHQutC40Lkg0YDQsNC50L7QvScsXHJcbiAgICBjYXJkdXJsOiBraG9sbW9nb3Jza3lSYXlvbixcclxuICB9LFxyXG4gIHtcclxuICAgIGNhcmRpbmZvOiAn0JHQsNC50LrQsNC7JyxcclxuICAgIGNhcmR1cmw6IGJhaWthbCxcclxuICB9LFxyXG5dOyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lclNlbGVjdG9yLCByZW5kZXJlcikge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH07XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfTtcclxuXHJcbiAgcmVuZGVySXRlbXMoaXRlbXMpIHtcclxuICAgIGl0ZW1zLmZvckVhY2goKGRhdGEpID0+IHtcclxuICAgICAgdGhpcy5fcmVuZGVyZXIoZGF0YSk7XHJcbiAgICB9KTtcclxuICB9O1xyXG59OyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3RvcihzZWxlY3RvclBvcHVwKSB7XHJcbiAgICB0aGlzLl9zZWxlY3RvclBvcHVwID0gc2VsZWN0b3JQb3B1cDtcclxuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvclBvcHVwKTtcclxuICAgIHRoaXMuX2JvZHlFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBhZ2UnKTtcclxuICB9O1xyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoKGV2dC5rZXkpID09PSAnRXNjYXBlJykge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9O1xyXG4gIH07XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2dCkgPT4ge1xyXG4gICAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwLWZhZGVfb3BlbmVkJykgfHwgZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Nsb3NlLWJ1dHRvbicpKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9O1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwLWZhZGVfb3BlbmVkJyk7XHJcbiAgICB0aGlzLl9ib2R5RWxlbWVudC5jbGFzc0xpc3QuYWRkKCdwYWdlX25vc2Nyb2xsJyk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH07XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXAtZmFkZV9vcGVuZWQnKTtcclxuICAgIHRoaXMuX2JvZHlFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3BhZ2Vfbm9zY3JvbGwnKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfTtcclxufTsiLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHNlbGVjdG9yUG9wdXAsIHNlbGVjdG9yRm9ybSwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHNlbGVjdG9yUG9wdXApO1xuICAgIHRoaXMuX3NlbGVjdG9yRm9ybSA9IHNlbGVjdG9yRm9ybTtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvckZvcm0pO1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2lucHV0JykpO1xuXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gIH07XG5cbiAgZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT5cbiAgICAgIHRoaXMuX2Zvcm1WYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZSxcbiAgICApO1xuXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XG4gIH07XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuZ2V0SW5wdXRWYWx1ZXMoKSlcbiAgICB9KTtcbiAgfTtcblxuICBvcGVuKCkge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfTtcblxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgfTtcbn07IiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3Ioc2VsZWN0b3JQb3B1cCkge1xyXG4gICAgc3VwZXIoc2VsZWN0b3JQb3B1cCk7XHJcbiAgICB0aGlzLl9pbWdQb3B1cEVsZW1lbnQgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtZmlndXJlX19pbWFnZScpO1xyXG4gICAgdGhpcy5fdGl0bGVQb3B1cEVsZW1lbnQgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtZmlndXJlX190aXRsZScpO1xyXG4gIH07XHJcblxyXG4gIG9wZW5JbWFnZSA9IChjYXJkaW5mbywgY2FyZHVybCkgPT4ge1xyXG4gICAgdGhpcy5fdGl0bGVQb3B1cEVsZW1lbnQudGV4dENvbnRlbnQgPSBjYXJkaW5mbztcclxuICAgIHRoaXMuX2ltZ1BvcHVwRWxlbWVudC5zcmMgPSBjYXJkdXJsO1xyXG4gICAgdGhpcy5faW1nUG9wdXBFbGVtZW50LmFsdCA9IGNhcmRpbmZvO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH07XHJcbn07IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgdGl0bGVFbGVtZW50LCBzdWJ0aXRsZUVsZW1lbnQgfSkge1xyXG4gICAgdGhpcy5fdGl0bGVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aXRsZUVsZW1lbnQpO1xyXG4gICAgdGhpcy5fc3VidGl0bGVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzdWJ0aXRsZUVsZW1lbnQpO1xyXG4gIH07XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgdXNlcm5hbWU6IHRoaXMuX3RpdGxlRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgICAgdXNlcmluZm86IHRoaXMuX3N1YnRpdGxlRWxlbWVudC50ZXh0Q29udGVudFxyXG4gICAgfTtcclxuICB9O1xyXG5cclxuICBzZXRVc2VySW5mbyhkYXRhKSB7XHJcbiAgICB0aGlzLl90aXRsZUVsZW1lbnQudGV4dENvbnRlbnQgPSBkYXRhLnVzZXJuYW1lO1xyXG4gICAgdGhpcy5fc3VidGl0bGVFbGVtZW50LnRleHRDb250ZW50ID0gZGF0YS51c2VyaW5mbztcclxuICB9O1xyXG59OyIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuXG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgaGFuZGxlQ2FyZENsaWNrIH0sIHNlbGVjdG9ycykge1xuICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9zZWxlY3RvcnMgPSBzZWxlY3RvcnM7XG4gICAgdGhpcy5fZWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3JzLnRlbXBsYXRlKS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc2VsZWN0b3JzLmFydGljbGVUZW1wbGF0ZUVsZW1lbnQpLmNsb25lTm9kZSh0cnVlKTtcbiAgICB0aGlzLl90ZXh0RWxlbWVudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvcnMudGV4dFRlbXBsYXRlRWxlbWVudCk7XG4gICAgdGhpcy5faW1nRWxlbWVudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvcnMuaW1nVGVtcGxhdGVFbGVtZW50KTtcbiAgICB0aGlzLl9saWtlRWxlbWVudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvcnMubGlrZVRlbXBsYXRlRWxlbWVudCk7XG4gICAgdGhpcy5fYmFza2V0RWxlbWVudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3RvcnMuYmFza2V0VGVtcGxhdGVFbGVtZW50KTtcbiAgfTtcblxuICBfc2V0RWxlbWVudERhdGEoKSB7XG4gICAgdGhpcy5fdGV4dEVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLl9kYXRhLmNhcmRpbmZvO1xuICAgIHRoaXMuX2ltZ0VsZW1lbnQuc3JjID0gdGhpcy5fZGF0YS5jYXJkdXJsO1xuICAgIHRoaXMuX2ltZ0VsZW1lbnQuYWx0ID0gdGhpcy5fZGF0YS5jYXJkaW5mbztcbiAgfTtcblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fbGlrZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVDbGlja0xpa2VFbGVtZW50KTtcbiAgICB0aGlzLl9iYXNrZXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlQ2xpY2tEZWxldGVFbGVtZW50KTtcbiAgICB0aGlzLl9pbWdFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4geyB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fZGF0YS5jYXJkaW5mbywgdGhpcy5fZGF0YS5jYXJkdXJsKSB9KTtcbiAgfTtcblxuICBfaGFuZGxlQ2xpY2tMaWtlRWxlbWVudCA9ICgpID0+IHtcbiAgICB0aGlzLl9saWtlRWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKCdlbGVtZW50X19saWtlX3R5cGVfYWN0aXZlJyk7XG4gIH07XG5cbiAgX2hhbmRsZUNsaWNrRGVsZXRlRWxlbWVudCA9ICgpID0+IHtcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuICB9O1xuXG4gIGdlbmVyYXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9zZXRFbGVtZW50RGF0YSgpO1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfTtcbn07IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG5cbiAgY29uc3RydWN0b3IodmFsaWRhdGVTZWxlY3RvcnMsIGZvcm1FbGVtZW50KSB7XG4gICAgdGhpcy5fdmFsaWRhdGVTZWxlY3RvcnMgPSB2YWxpZGF0ZVNlbGVjdG9ycztcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3ZhbGlkYXRlU2VsZWN0b3JzLmlucHV0U2VsZWN0b3IpO1xuICAgIHRoaXMuX2FycmF5SW5wdXRFbGVtZW50cyA9IEFycmF5LmZyb20odGhpcy5faW5wdXRFbGVtZW50cyk7XG4gICAgdGhpcy5fc3BhbkVycm9yRWxlbWVudHMgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX3ZhbGlkYXRlU2VsZWN0b3JzLnNwYW5FcnJvclNlbGVjdG9yKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl92YWxpZGF0ZVNlbGVjdG9ycy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gIH07XG5cbiAgX3VubG9ja1N1Ym1pdEJ1dHRvbkVsZW1lbnQoKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3ZhbGlkYXRlU2VsZWN0b3JzLmludmFsaWRTdWJtaXRCdXR0b25FbGVtZW50KTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcbiAgfTtcblxuICBfYmxvY2tTdWJtaXRCdXR0b25FbGVtZW50KCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl92YWxpZGF0ZVNlbGVjdG9ycy5pbnZhbGlkU3VibWl0QnV0dG9uRWxlbWVudCk7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gIH07XG5cbiAgY2xlYW5FcnJvckZvcm0oKSB7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChjbGVhbklucHV0KSA9PiB7XG4gICAgICBjbGVhbklucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fdmFsaWRhdGVTZWxlY3RvcnMuZXJyb3JFbGVtZW50KTtcbiAgICAgIGNsZWFuSW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl92YWxpZGF0ZVNlbGVjdG9ycy5lcnJvckJvcmRlckVsZW1lbnQpO1xuICAgIH0pO1xuICAgIHRoaXMuX3NwYW5FcnJvckVsZW1lbnRzLmZvckVhY2goKGNsZWFuU3BhbikgPT4ge1xuICAgICAgY2xlYW5TcGFuLnRleHRDb250ZW50ID0gXCJcIjtcbiAgICB9KTtcbiAgICB0aGlzLl9ibG9ja1N1Ym1pdEJ1dHRvbkVsZW1lbnQoKTtcbiAgfTtcblxuICBfaXNWYWxpZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fYXJyYXlJbnB1dEVsZW1lbnRzLnNvbWUoKGRhdGEpID0+ICFkYXRhLnZhbGlkaXR5LnZhbGlkKTtcbiAgfTtcblxuICB0b2dnbGVGb3JtU3VibWl0KCkge1xuICAgIHRoaXMuX2lzVmFsaWQoKSA/IHRoaXMuX2Jsb2NrU3VibWl0QnV0dG9uRWxlbWVudCgpIDogdGhpcy5fdW5sb2NrU3VibWl0QnV0dG9uRWxlbWVudCgpO1xuICB9O1xuXG4gIF9zZXRGaWVsZEVycm9yKGVsZW1lbnRGaWVsZCwgZWxlbWVudEVycm9yLCBwYXJhbXMpIHtcbiAgICBlbGVtZW50RXJyb3IudGV4dENvbnRlbnQgPSBwYXJhbXMudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgaWYgKHBhcmFtcy52YWxpZCkge1xuICAgICAgZWxlbWVudEZpZWxkLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fdmFsaWRhdGVTZWxlY3RvcnMuZXJyb3JFbGVtZW50KTtcbiAgICAgIGVsZW1lbnRGaWVsZC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX3ZhbGlkYXRlU2VsZWN0b3JzLmVycm9yQm9yZGVyRWxlbWVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsZW1lbnRGaWVsZC5jbGFzc0xpc3QuYWRkKHRoaXMuX3ZhbGlkYXRlU2VsZWN0b3JzLmVycm9yRWxlbWVudCk7XG4gICAgICBlbGVtZW50RmllbGQuY2xhc3NMaXN0LmFkZCh0aGlzLl92YWxpZGF0ZVNlbGVjdG9ycy5lcnJvckJvcmRlckVsZW1lbnQpO1xuICAgIH07XG4gIH07XG5cbiAgX2NoZWNrRmllbGRWYWxpZGl0eShlbGVtZW50RmllbGQpIHtcbiAgICBjb25zdCB7IHZhbGlkYXRpb25NZXNzYWdlLCB2YWxpZGl0eTogeyB2YWxpZCB9IH0gPSBlbGVtZW50RmllbGQ7XG4gICAgY29uc3Qgc3VibWl0QnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fdmFsaWRhdGVTZWxlY3RvcnMuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICAgIGNvbnN0IGVycm9yVGV4dENvbnRhaW5lclNlbGVjdG9yID0gYC5wb3B1cF9faW5wdXQtZXJyb3JfJHtlbGVtZW50RmllbGQubmFtZX1gO1xuICAgIGNvbnN0IGVsZW1lbnRFcnJvciA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoZXJyb3JUZXh0Q29udGFpbmVyU2VsZWN0b3IpO1xuICAgIGNvbnN0IHBhcmFtcyA9IHtcbiAgICAgIHZhbGlkYXRpb25NZXNzYWdlLFxuICAgICAgdmFsaWQsXG4gICAgfTtcblxuICAgIHRoaXMudG9nZ2xlRm9ybVN1Ym1pdCgpO1xuICAgIHRoaXMuX3NldEZpZWxkRXJyb3IoZWxlbWVudEZpZWxkLCBlbGVtZW50RXJyb3IsIHBhcmFtcywgc3VibWl0QnV0dG9uRWxlbWVudCk7XG5cbiAgICByZXR1cm4gdmFsaWQ7XG4gIH07XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2NoZWNrRmllbGRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMudG9nZ2xlRm9ybVN1Ym1pdCgpO1xuICB9O1xufTsiLCJpbXBvcnQgJy4uL3BhZ2VzL2luZGV4LmNzcyc7XG5pbXBvcnQgeyBpbml0aWFsQ2FyZHMgfSBmcm9tICcuLi9zY3JpcHRzL2FycmF5cy5qcyc7XG5pbXBvcnQgU2VjdGlvbiBmcm9tICcuLi9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJztcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzJztcbmltcG9ydCBVc2VySW5mbyBmcm9tICcuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcbmltcG9ydCBDYXJkIGZyb20gJy4uL2NvbXBvbmVudHMvQ2FyZC5qcyc7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tICcuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xuXG5jb25zdCB2YWxpZGF0ZVNlbGVjdG9ycyA9IHtcbiAgcG9wdXA6ICcucG9wdXAtZmFkZScsXG4gIGZvcm1TZWxlY3RvcjogJy5wb3B1cF9fZm9ybScsXG4gIGZvcm1TZWxlY3RvckluZm86ICcucG9wdXBfX2Zvcm1faW5mbycsXG4gIGZvcm1TZWxlY3RvckNhcmQ6ICcucG9wdXBfX2Zvcm1fQ2FyZCcsXG4gIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2lucHV0JyxcbiAgc3BhbkVycm9yU2VsZWN0b3I6ICcucG9wdXBfX2lucHV0LWVycm9yJyxcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcucG9wdXBfX3N1Ym1pdC1idXR0b24nLFxuICBlcnJvckVsZW1lbnQ6ICdwb3B1cF9faW5wdXQtZXJyb3InLFxuICBlcnJvckJvcmRlckVsZW1lbnQ6ICdlcnJvcicsXG4gIGludmFsaWRTdWJtaXRCdXR0b25FbGVtZW50OiAncG9wdXBfX3N1Ym1pdC1idXR0b25fdmFsaWRfb2ZmJyxcbn07XG5cbmNvbnN0IHNlbGVjdG9ycyA9IHtcbiAgYm9keUVsZW1lbnQ6ICcucGFnZScsXG4gIGVkaXRCdXR0b246ICcucHJvZmlsZV9fZWRpdC1idXR0b24nLFxuICBhZGRCdXR0b246ICcucHJvZmlsZV9fYWRkLWJ1dHRvbicsXG4gIHRpdGxlRWxlbWVudDogJy5wcm9maWxlX190aXRsZScsXG4gIHN1YnRpdGxlRWxlbWVudDogJy5wcm9maWxlX19zdWJ0aXRsZScsXG4gIGVsZW1lbnRFbGVtZW50OiAnLmVsZW1lbnRzJyxcbiAgcG9wdXA6ICcucG9wdXAtZmFkZScsXG4gIHBvcHVwRWxlbWVudDogJy5wb3B1cC1mYWRlX3R5cGVfZWRpdCcsXG4gIHBvcHVwRWxlbWVudENhcmQ6ICcucG9wdXAtZmFkZV90eXBlX25ldy1jYXJkJyxcbiAgcG9wdXBFbGVtZW50SW1nOiAnLnBvcHVwLWZhZGVfdHlwZV9pbWcnLFxuICBmb3JtOiAnLnBvcHVwX19mb3JtJyxcbiAgZm9ybUVsZW1lbnRJbmZvOiAnLnBvcHVwX19mb3JtX2luZm8nLFxuICBmb3JtRWxlbWVudHJDYXJkOiAnLnBvcHVwX19mb3JtX0NhcmQnLFxuICBpbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19pbnB1dCcsXG4gIGlucHV0TmFtZVBvcHVwOiAnLnBvcHVwX19pbnB1dF90eXBlX25hbWUnLFxuICBpbnB1dERlc2NyaXB0aW9uUG9wdXA6ICcucG9wdXBfX2lucHV0X3R5cGVfZGVzY3JpcHRpb24nLFxuICBpbWdQb3B1cEVsZW1lbnQ6ICcucG9wdXAtZmlndXJlX19pbWFnZScsXG4gIHRpdGxlUG9wdXBFbGVtZW50OiAnLnBvcHVwLWZpZ3VyZV9fdGl0bGUnLFxuICB0ZW1wbGF0ZTogJy50ZW1wbGF0ZScsXG4gIGFydGljbGVUZW1wbGF0ZUVsZW1lbnQ6ICcuZWxlbWVudCcsXG4gIHRleHRUZW1wbGF0ZUVsZW1lbnQ6ICcuZWxlbWVudF9fdGl0bGUnLFxuICBpbWdUZW1wbGF0ZUVsZW1lbnQ6ICcuZWxlbWVudF9faW1hZ2UnLFxuICBsaWtlVGVtcGxhdGVFbGVtZW50OiAnLmVsZW1lbnRfX2xpa2UnLFxuICBiYXNrZXRUZW1wbGF0ZUVsZW1lbnQ6ICcuZWxlbWVudF9fYmFza2V0Jyxcbn07XG5cbmNvbnN0IHBvcHVwRWxlbWVudEVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5wb3B1cEVsZW1lbnQpO1xuY29uc3QgZm9ybUVkaXQgPSBwb3B1cEVsZW1lbnRFZGl0LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLmZvcm0pO1xuY29uc3QgaW5wdXROYW1lRWRpdCA9IGZvcm1FZGl0LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLmlucHV0TmFtZVBvcHVwKTtcbmNvbnN0IGlucHV0RGVzY3JpcHRpb25FZGl0ID0gZm9ybUVkaXQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMuaW5wdXREZXNjcmlwdGlvblBvcHVwKTtcblxuY29uc3QgcG9wdXBFbGVtZW50Q2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnBvcHVwRWxlbWVudENhcmQpO1xuY29uc3QgZm9ybUNhcmQgPSBwb3B1cEVsZW1lbnRDYXJkLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLmZvcm0pO1xuY29uc3QgaW5wdXRzTmFtZUNhcmQgPSBmb3JtQ2FyZC5xdWVyeVNlbGVjdG9yQWxsKHNlbGVjdG9ycy5pbnB1dFNlbGVjdG9yKTtcblxuY29uc3QgdmFsaWRhdG9ySW5mbyA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRlU2VsZWN0b3JzLCBmb3JtRWRpdCk7XG5jb25zdCB2YWxpZGF0b3JDYXJkID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGVTZWxlY3RvcnMsIGZvcm1DYXJkKTtcbnZhbGlkYXRvckluZm8uZW5hYmxlVmFsaWRhdGlvbigpO1xudmFsaWRhdG9yQ2FyZC5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IGVkaXRTdWJtaXQgPSBuZXcgUG9wdXBXaXRoRm9ybShzZWxlY3RvcnMucG9wdXBFbGVtZW50LCBzZWxlY3RvcnMuZm9ybUVsZW1lbnRJbmZvLCBzdWJtaXRFZGl0KTtcbmVkaXRTdWJtaXQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgY2FyZFN1Ym1pdCA9IG5ldyBQb3B1cFdpdGhGb3JtKHNlbGVjdG9ycy5wb3B1cEVsZW1lbnRDYXJkLCBzZWxlY3RvcnMuZm9ybUVsZW1lbnRyQ2FyZCwgc3VibWl0Q2FyZCk7XG5jYXJkU3VibWl0LnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmZ1bmN0aW9uIGNyZWF0ZU5ld0NhcmQoZGF0YUl0ZW1zKSB7XG4gIGNvbnN0IGNhcmRJdGVtID0gbmV3IENhcmQoeyBkYXRhOiBkYXRhSXRlbXMsIGhhbmRsZUNhcmRDbGljayB9LCBzZWxlY3RvcnMpO1xuICByZXR1cm4gY2FyZEl0ZW0uZ2VuZXJhdGVDYXJkKCk7XG59O1xuXG5jb25zdCBzZWN0aW9uID0gbmV3IFNlY3Rpb24oc2VsZWN0b3JzLmVsZW1lbnRFbGVtZW50LCAoZGF0YUl0ZW1zKSA9PiB7XG4gIHNlY3Rpb24uYWRkSXRlbShjcmVhdGVOZXdDYXJkKGRhdGFJdGVtcykpO1xufSlcbnNlY3Rpb24ucmVuZGVySXRlbXMoaW5pdGlhbENhcmRzKTtcblxuY29uc3QgaW1nRWxlbWVudCA9IG5ldyBQb3B1cFdpdGhJbWFnZShzZWxlY3RvcnMucG9wdXBFbGVtZW50SW1nKTtcbmltZ0VsZW1lbnQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuXG5mdW5jdGlvbiBoYW5kbGVDYXJkQ2xpY2sobmFtZSwgbGluaykge1xuICBpbWdFbGVtZW50Lm9wZW5JbWFnZShuYW1lLCBsaW5rKTtcbn07XG5cbmNvbnN0IG5ld1VzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHsgdGl0bGVFbGVtZW50OiBzZWxlY3RvcnMudGl0bGVFbGVtZW50LCBzdWJ0aXRsZUVsZW1lbnQ6IHNlbGVjdG9ycy5zdWJ0aXRsZUVsZW1lbnQgfSk7XG5mdW5jdGlvbiBzdWJtaXRFZGl0KGRhdGEpIHtcbiAgbmV3VXNlckluZm8uc2V0VXNlckluZm8oZGF0YSk7XG4gIGVkaXRTdWJtaXQuY2xvc2UoKTtcbn07XG5cbmZ1bmN0aW9uIHN1Ym1pdENhcmQoKSB7XG4gIHNlY3Rpb24uYWRkSXRlbShjcmVhdGVOZXdDYXJkKGNhcmRTdWJtaXQuZ2V0SW5wdXRWYWx1ZXMoKSkpO1xuICBjYXJkU3VibWl0LmNsb3NlKCk7XG59O1xuXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLmVkaXRCdXR0b24pO1xucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGNvbnN0IGRhdGFVc2VyID0gbmV3VXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgaW5wdXROYW1lRWRpdC52YWx1ZSA9IGRhdGFVc2VyLnVzZXJuYW1lO1xuICBpbnB1dERlc2NyaXB0aW9uRWRpdC52YWx1ZSA9IGRhdGFVc2VyLnVzZXJpbmZvO1xuICB2YWxpZGF0b3JJbmZvLnRvZ2dsZUZvcm1TdWJtaXQoKTtcbiAgdmFsaWRhdG9ySW5mby5jbGVhbkVycm9yRm9ybSgpO1xuICBlZGl0U3VibWl0Lm9wZW4oKTtcbn0pO1xuXG5jb25zdCBwcm9maWxlQWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMuYWRkQnV0dG9uKTtcbnByb2ZpbGVBZGRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIHZhbGlkYXRvckNhcmQudG9nZ2xlRm9ybVN1Ym1pdCgpO1xuICB2YWxpZGF0b3JDYXJkLmNsZWFuRXJyb3JGb3JtKCk7XG4gIGNhcmRTdWJtaXQub3BlbigpO1xufSk7Il0sIm5hbWVzIjpbImluaXRpYWxDYXJkcyIsImNhcmRpbmZvIiwiY2FyZHVybCIsIlVSTCIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwidGhpcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJlbGVtZW50IiwicHJlcGVuZCIsIml0ZW1zIiwiZm9yRWFjaCIsImRhdGEiLCJQb3B1cCIsInNlbGVjdG9yUG9wdXAiLCJldnQiLCJrZXkiLCJjbG9zZSIsIl9zZWxlY3RvclBvcHVwIiwiX3BvcHVwIiwiX2JvZHlFbGVtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsInRhcmdldCIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiYWRkIiwiX2hhbmRsZUVzY0Nsb3NlIiwicmVtb3ZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIlBvcHVwV2l0aEZvcm0iLCJzZWxlY3RvckZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiX3NlbGVjdG9yRm9ybSIsIl9mb3JtIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9mb3JtVmFsdWVzIiwiaW5wdXQiLCJuYW1lIiwidmFsdWUiLCJwcmV2ZW50RGVmYXVsdCIsImdldElucHV0VmFsdWVzIiwicmVzZXQiLCJQb3B1cFdpdGhJbWFnZSIsIl90aXRsZVBvcHVwRWxlbWVudCIsInRleHRDb250ZW50IiwiX2ltZ1BvcHVwRWxlbWVudCIsInNyYyIsImFsdCIsIlVzZXJJbmZvIiwidGl0bGVFbGVtZW50Iiwic3VidGl0bGVFbGVtZW50IiwiX3RpdGxlRWxlbWVudCIsIl9zdWJ0aXRsZUVsZW1lbnQiLCJ1c2VybmFtZSIsInVzZXJpbmZvIiwiQ2FyZCIsInNlbGVjdG9ycyIsImhhbmRsZUNhcmRDbGljayIsIl9saWtlRWxlbWVudCIsInRvZ2dsZSIsIl9lbGVtZW50IiwiX2RhdGEiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX3NlbGVjdG9ycyIsInRlbXBsYXRlIiwiY29udGVudCIsImFydGljbGVUZW1wbGF0ZUVsZW1lbnQiLCJjbG9uZU5vZGUiLCJfdGV4dEVsZW1lbnQiLCJ0ZXh0VGVtcGxhdGVFbGVtZW50IiwiX2ltZ0VsZW1lbnQiLCJpbWdUZW1wbGF0ZUVsZW1lbnQiLCJsaWtlVGVtcGxhdGVFbGVtZW50IiwiX2Jhc2tldEVsZW1lbnQiLCJiYXNrZXRUZW1wbGF0ZUVsZW1lbnQiLCJfaGFuZGxlQ2xpY2tMaWtlRWxlbWVudCIsIl9oYW5kbGVDbGlja0RlbGV0ZUVsZW1lbnQiLCJfc2V0RWxlbWVudERhdGEiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJGb3JtVmFsaWRhdG9yIiwidmFsaWRhdGVTZWxlY3RvcnMiLCJmb3JtRWxlbWVudCIsIl92YWxpZGF0ZVNlbGVjdG9ycyIsIl9mb3JtRWxlbWVudCIsIl9pbnB1dEVsZW1lbnRzIiwiaW5wdXRTZWxlY3RvciIsIl9hcnJheUlucHV0RWxlbWVudHMiLCJfc3BhbkVycm9yRWxlbWVudHMiLCJzcGFuRXJyb3JTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25FbGVtZW50Iiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbnZhbGlkU3VibWl0QnV0dG9uRWxlbWVudCIsInJlbW92ZUF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsImNsZWFuSW5wdXQiLCJlcnJvckVsZW1lbnQiLCJlcnJvckJvcmRlckVsZW1lbnQiLCJjbGVhblNwYW4iLCJfYmxvY2tTdWJtaXRCdXR0b25FbGVtZW50Iiwic29tZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaXNWYWxpZCIsIl91bmxvY2tTdWJtaXRCdXR0b25FbGVtZW50IiwiZWxlbWVudEZpZWxkIiwiZWxlbWVudEVycm9yIiwicGFyYW1zIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJzdWJtaXRCdXR0b25FbGVtZW50IiwiZXJyb3JUZXh0Q29udGFpbmVyU2VsZWN0b3IiLCJ0b2dnbGVGb3JtU3VibWl0IiwiX3NldEZpZWxkRXJyb3IiLCJpbnB1dEVsZW1lbnQiLCJfY2hlY2tGaWVsZFZhbGlkaXR5IiwicG9wdXAiLCJmb3JtU2VsZWN0b3IiLCJmb3JtU2VsZWN0b3JJbmZvIiwiZm9ybVNlbGVjdG9yQ2FyZCIsImJvZHlFbGVtZW50IiwiZWRpdEJ1dHRvbiIsImFkZEJ1dHRvbiIsImVsZW1lbnRFbGVtZW50IiwicG9wdXBFbGVtZW50IiwicG9wdXBFbGVtZW50Q2FyZCIsInBvcHVwRWxlbWVudEltZyIsImZvcm0iLCJmb3JtRWxlbWVudEluZm8iLCJmb3JtRWxlbWVudHJDYXJkIiwiaW5wdXROYW1lUG9wdXAiLCJpbnB1dERlc2NyaXB0aW9uUG9wdXAiLCJpbWdQb3B1cEVsZW1lbnQiLCJ0aXRsZVBvcHVwRWxlbWVudCIsImZvcm1FZGl0IiwiaW5wdXROYW1lRWRpdCIsImlucHV0RGVzY3JpcHRpb25FZGl0IiwiZm9ybUNhcmQiLCJ2YWxpZGF0b3JJbmZvIiwidmFsaWRhdG9yQ2FyZCIsImVuYWJsZVZhbGlkYXRpb24iLCJlZGl0U3VibWl0IiwibmV3VXNlckluZm8iLCJzZXRVc2VySW5mbyIsInNldEV2ZW50TGlzdGVuZXJzIiwiY2FyZFN1Ym1pdCIsInNlY3Rpb24iLCJhZGRJdGVtIiwiY3JlYXRlTmV3Q2FyZCIsImRhdGFJdGVtcyIsImdlbmVyYXRlQ2FyZCIsInJlbmRlckl0ZW1zIiwiaW1nRWxlbWVudCIsImxpbmsiLCJvcGVuSW1hZ2UiLCJkYXRhVXNlciIsImdldFVzZXJJbmZvIiwiY2xlYW5FcnJvckZvcm0iLCJvcGVuIl0sInNvdXJjZVJvb3QiOiIifQ==